(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{112:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2721,23)),Promise.resolve().then(s.t.bind(s,2129,23)),Promise.resolve().then(s.t.bind(s,3103,23)),Promise.resolve().then(s.t.bind(s,1583,23)),Promise.resolve().then(s.bind(s,9916)),Promise.resolve().then(s.bind(s,6472)),Promise.resolve().then(s.bind(s,2450)),Promise.resolve().then(s.bind(s,4334)),Promise.resolve().then(s.bind(s,4174)),Promise.resolve().then(s.bind(s,2147))},1583:()=>{},2147:(e,t,s)=>{"use strict";s.d(t,{PlatformProvider:()=>c,V:()=>o});var r=s(1929),a=s(2477),l=s(3113);let n=async()=>{try{let e=(0,l.e9)("platform"),t=await fetch(e);if(!t.ok)throw{code:t.status,message:"Failed to fetch platform info"};let s=await t.json();return{orchestrator:({docker:"docker",k8s:"k8s",kubernetes:"k8s",local:"local",unknown:"unknown"})[s.orchestrator]||"unknown",api_version:s.api_version}}catch(e){if(e.code)throw e;throw{code:500,message:e.message||"Failed to fetch platform info"}}},i=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("usePlatform must be used within a PlatformProvider");return e},c=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(null),u=async()=>{try{c(!0),h(null);let e=await n();l(e)}catch(e){h(e.message||"Failed to fetch platform info"),console.error("Platform fetch error:",e)}finally{c(!1)}};return(0,a.useEffect)(()=>{u()},[]),(0,r.jsx)(i.Provider,{value:{platform:s,loading:o,error:d,refetch:u},children:t})}},2450:(e,t,s)=>{"use strict";s.d(t,{Header:()=>E});var r=s(1929),a=s(2477),l=s(9596);let n={src:"/_next/static/media/logo-full-name.71a530b2.svg",height:24,width:160,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/list.b7d0b0f2.svg",height:16,width:16,blurWidth:0,blurHeight:0};var o=s(9120);let c={src:"/_next/static/media/chevron-down.978a5cc5.svg",height:16,width:16,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/chevron-up.d51bfa59.svg",height:16,width:16,blurWidth:0,blurHeight:0};var h=s(3796),u=s.n(h),m=s(7161),f=s(8090),x=s(9985),g=s(1475);let p={src:"/_next/static/media/help-questionmark.abe8e31f.svg",height:800,width:800,blurWidth:0,blurHeight:0};var v=s(1869),b=s(2526);let w={src:"/_next/static/media/menu-burger-horizontal.8bb9e68a.svg",height:800,width:800,blurWidth:0,blurHeight:0};var k=s(2147);let j=()=>{let{platform:e,loading:t,error:s}=(0,k.V)();return t?(0,r.jsx)("span",{className:"text-xs",style:{color:"#A8ADB8"},children:"Loading..."}):s||!e||"k8s"===e.orchestrator?null:(0,r.jsx)("span",{className:"text-xs",style:{color:"#A8ADB8"},children:(e=>{switch(e){case"docker":return"Docker version";case"k8s":return"Kubernetes version";case"local":return"Local version";default:return"Unknown version"}})(e.orchestrator)})},y=e=>{let{href:t,icon:s,label:a,isActive:n,onMouseEnter:i,onMouseLeave:o,navRef:c}=e;return(0,r.jsx)("li",{ref:c,className:"text-sm font-medium relative group h-full flex items-center pt-3",onMouseEnter:i,onMouseLeave:o,children:(0,r.jsxs)(u(),{href:t,className:"flex items-center gap-2 transition-colors whitespace-nowrap min-w-[60px] px-4 pb-2 h-full",children:[(0,r.jsx)(l.default,{src:s,alt:a,width:24,height:24}),a]})})},N=e=>{let{href:t,icon:s,label:a,onClick:n}=e;return(0,r.jsx)("li",{className:"text-sm font-medium",children:(0,r.jsxs)(u(),{href:t,className:"flex items-center gap-3 px-4 py-3 transition-colors hover:bg-gray-800 rounded-md",onClick:n,children:[(0,r.jsx)(l.default,{src:s,alt:a,width:20,height:20}),a]})})},C=e=>{let{isOpen:t,setIsOpen:s}=e,n=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&s(!1)},r=e=>{"Escape"===e.key&&s(!1)};return t&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",r)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[t,s]);let i=()=>{s(!1)};return(0,r.jsxs)("div",{className:"relative",ref:n,children:[(0,r.jsxs)(v.$,{variant:"ghost",className:"p-2 lg:px-3 lg:py-2",onClick:()=>s(!t),children:[(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)(l.default,{src:p,alt:"Help",width:24,height:24})}),(0,r.jsxs)("div",{className:"hidden lg:flex items-center gap-2 cursor-pointer",children:["Help",(0,r.jsx)(l.default,{src:t?d:c,alt:"Toggle",width:16,height:16})]})]}),(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md shadow-lg py-1 background z-50 ".concat(t?"block":"hidden"),children:[(0,r.jsx)("a",{href:"https://docs.glassflow.dev/",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:i,children:"View Docs"}),(0,r.jsx)("a",{href:"mailto:help@glassflow.dev",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:i,children:"Contact Us"}),(0,r.jsx)("a",{href:"https://github.com/glassflow/clickhouse-etl/issues",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:i,children:"Report an Issue"})]})]})};function E(){let e=(0,m.useRouter)(),t=(0,m.usePathname)(),{coreStore:s}=(0,f.useStore)(),{resetPipelineState:c}=s,[d,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[k,E]=(0,a.useState)(null),[S,A]=(0,a.useState)({left:0,width:0}),P=[{href:"/home",icon:o.A,label:"Create"},{href:"/pipelines",icon:i,label:"Pipelines"}],L="/home"===t||"/pipelines/create"===t?0:t.startsWith("/pipelines")?1:-1,_=null!==k?k:L,T=(0,a.useRef)([]),B=(0,a.useCallback)(e=>{let t=T.current[e];if(t){let e=t.parentElement;if(e){let s=e.getBoundingClientRect(),r=t.getBoundingClientRect();A({left:r.left-s.left,width:r.width})}}},[]);(0,a.useEffect)(()=>{_>=0&&B(_)},[_,B]);let[H,I]=(0,a.useState)({visible:!1,message:"Leaving the create journey will discard current pipeline configuration. Are you sure you want to perform this action?",title:"Discard pipeline configuration",okButtonText:"Yes",cancelButtonText:"No",type:"info"}),W=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{W.current&&!W.current.contains(e.target)&&h(!1)},t=e=>{"Escape"===e.key&&h(!1)};return d&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",t)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[d]);let z=()=>{"/pipelines/create"===t&&I(e=>({...e,visible:!0}))},D=async t=>{if(I(e=>({...e,visible:!1})),t===x.R.YES){c("",!0);try{let t=await (0,g.Cz)();t&&t.length>0?e.push("/pipelines"):e.push("/home")}catch(t){console.error("Error checking existing pipelines:",t),e.push("/home")}}};return(0,r.jsxs)("div",{className:"h-16 w-full max-w-[var(--main-container-width)] mx-auto",children:[(0,r.jsxs)("div",{className:"container h-full px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center h-full",children:[(0,r.jsxs)("div",{className:"flex items-center h-full",children:[(0,r.jsx)("div",{className:"lg:hidden flex items-center",children:(0,r.jsx)(v.$,{variant:"ghost",className:"p-2",onClick:()=>h(!d),children:(0,r.jsx)(l.default,{src:d?b.A:w,alt:"Menu",width:24,height:24})})}),(0,r.jsx)("div",{className:"hidden lg:flex items-center pr-12 border-r border-r-[#3A3A3A]",children:(0,r.jsx)(v.$,{variant:"ghost",onClick:z,className:"p-0 hover:bg-transparent",children:(0,r.jsx)(l.default,{src:n,alt:"Glassflow Logo",width:140,height:30,className:"cursor-pointer w-auto h-[18px]"})})}),(0,r.jsx)("div",{className:"lg:hidden flex items-center justify-center flex-1",children:(0,r.jsx)(v.$,{variant:"ghost",onClick:z,className:"p-0 hover:bg-transparent",children:(0,r.jsx)(l.default,{src:n,alt:"Glassflow Logo",width:140,height:30,className:"cursor-pointer w-auto h-[18px]"})})}),(0,r.jsxs)("nav",{className:"hidden lg:flex flex-row h-full ml-12 relative",children:[(0,r.jsx)("ul",{className:"flex flex-row h-full",children:P.map((e,t)=>(0,r.jsx)(y,{href:e.href,icon:e.icon,label:e.label,isActive:L===t,onMouseEnter:()=>E(t),onMouseLeave:()=>E(null),navRef:e=>{T.current[t]=e}},t))}),_>=0&&(0,r.jsx)("div",{className:"absolute bottom-0 h-0.5 bg-gradient-to-r from-orange-300/30 via-orange-400 to-orange-300/30 rounded-full transition-all duration-300 ease-in-out",style:{left:"".concat(S.left,"px"),width:"".concat(S.width,"px")}})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(j,{}),(0,r.jsx)(C,{isOpen:u,setIsOpen:p})]})]}),(0,r.jsx)("div",{ref:W,className:"lg:hidden transition-all duration-300 ease-in-out ".concat(d?"max-h-64 opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:(0,r.jsx)("nav",{className:"py-4 bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md z-10",children:(0,r.jsxs)("ul",{className:"flex flex-col gap-4",children:[(0,r.jsx)(N,{href:"/home",icon:o.A,label:"Create",onClick:()=>h(!1)}),(0,r.jsx)(N,{href:"/pipelines",icon:i,label:"Pipelines",onClick:()=>h(!1)})]})})})]}),(0,r.jsx)(x.W,{visible:H.visible,title:H.title,description:H.message,okButtonText:H.okButtonText,cancelButtonText:H.cancelButtonText,onComplete:D})]})}},2526:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r={src:"/_next/static/media/close.d3c78582.svg",height:800,width:800,blurWidth:0,blurHeight:0}},4174:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(1929),a=s(8399);function l(e){let{children:t}=e;return(0,r.jsx)(a.N,{attribute:"data-theme",defaultTheme:"dark",enableSystem:!1,disableTransitionOnChange:!0,suppressHydrationWarning:!0,children:t})}},4334:(e,t,s)=>{"use strict";s.d(t,{HeaderWrapper:()=>a});var r=s(1929);function a(e){let{children:t}=e;return(0,r.jsx)("header",{className:"w-full shrink-0 sticky top-0 z-50 bg-[var(--color-background-elevation-base)]",style:{boxShadow:"var(--Shadow-Styles-Overlay-Layer-1-X, 0px) 1px 1px var(--Shadow-Styles-Overlay-Layer-1-Spread, 0px) #3A3A3A"},children:t})}},6472:(e,t,s)=>{"use strict";s.d(t,{HealthCheckProvider:()=>o});var r=s(1929),a=s(2477),l=s(1869);function n(e){let{showHealthCheck:t,onTestConnection:s,isConnected:a,isLoading:n}=e;return t?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8 w-full max-w-[488px] border border-[var(--border)] rounded-xl px-6 py-3 bg-[var(--color-background-neutral-faded)] shadow-lg animate-fadeIn z-50",children:[(0,r.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,r.jsx)("h2",{className:"title-2 flex items-center",children:(0,r.jsx)("span",{className:"text-normal-accent",children:"Troubleshoot Back-End Connection"})})}),(0,r.jsxs)("p",{className:"w-full text-left font-regular font-weight-[400] font-size-[16px] font-color-[var(--color-foreground-neutral-faded)]",children:[(0,r.jsx)("span",{className:"text-normal-accent",children:"The GlassFlow UI is unable to connect to the back-end API. Please test the connection by clicking the button below to ensure the back-end service is running and accessible."}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("span",{className:"text-normal-accent",children:["If the problem persists, please check our"," ",(0,r.jsx)("a",{href:"https://docs.glassflow.dev/getting-started/troubleshooting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"troubleshooting guide"})," ","or contact support for assistance."]})]}),(0,r.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-[var(--color-foreground-neutral-faded)]",children:"Back-End Status"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(n?"bg-yellow-500 animate-pulse":a?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:n?"Testing...":a?"Active":"Not Responding"})]})]}),(0,r.jsx)(l.$,{className:"btn-primary",type:"button",variant:"gradient",size:"custom",onClick:s,disabled:n,children:n?"Testing...":"Test Connection"})]})]}):null}var i=s(9302);function o(e){let{children:t}=e,[s,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{h(!0);try{let e=await (0,i.$)();c(e.success),l(!e.success)}catch(e){c(!1),l(!0)}finally{h(!1)}})()},[]);let u=async()=>{h(!0);try{let e=await (0,i.$)();c(e.success),l(!e.success)}catch(e){c(!1),l(!0)}finally{h(!1)}};return(0,r.jsxs)(r.Fragment,{children:[t,s&&(0,r.jsxs)("div",{className:"fixed top-8 right-8 z-50 max-w-[488px] animate-slideDownFade",children:[(0,r.jsx)(n,{showHealthCheck:s,onTestConnection:u,isConnected:o,isLoading:d}),(0,r.jsx)("button",{onClick:()=>{l(!1)},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close health check dialog",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}},9120:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r={src:"/_next/static/media/plus.54159413.svg",height:16,width:16,blurWidth:0,blurHeight:0}},9302:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var r=s(3113);let a=async()=>{try{let e=(0,r.e9)("healthz"),t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok)return{success:!0,status:"healthy",timestamp:new Date().toISOString(),message:"Backend is healthy"};{let e="Backend health check failed with status ".concat(t.status);try{e=(await t.json()).message||e}catch(s){e=t.statusText||e}throw{code:t.status,message:e}}}catch(e){if(e.code)throw e;throw{code:500,message:e.message||"Failed to check backend health"}}}},9916:(e,t,s)=>{"use strict";s.d(t,{AnalyticsProvider:()=>c});var r=s(1929),a=s(2477),l=s(5449),n=s(8387),i=s(6456);let o="glassflow-user-id";function c(e){let{children:t}=e;return(0,a.useEffect)(()=>{if(!(0,n.E7)())return void console.log("Analytics is disabled via NEXT_PUBLIC_ANALYTICS_ENABLED environment variable");(0,l.Bu)();let e=localStorage.getItem(o);if(!e)try{e=(0,i.A)(),localStorage.setItem(o,e)}catch(r){console.error("Failed to generate UUID, using fallback:",r);let t=Date.now(),s=Math.floor(1e6*Math.random()).toString().padStart(6,"0");e="".concat(t,"-").concat(s),localStorage.setItem(o,e)}(0,l.sw)(e)},[]),(0,r.jsx)(r.Fragment,{children:t})}}},e=>{e.O(0,[6315,3574,2270,2765,3878,7901,5037,6460,3888,5704,7358],()=>e(e.s=112)),_N_E=e.O()}]);