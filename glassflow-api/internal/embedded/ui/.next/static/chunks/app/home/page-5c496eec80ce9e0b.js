(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8620],{579:(e,t,a)=>{"use strict";a.d(t,{s:()=>l});var r=a(2147);let l=()=>{let{platform:e,loading:t,error:a}=(0,r.V)(),l=(null==e?void 0:e.orchestrator)==="docker",i=(null==e?void 0:e.orchestrator)==="k8s",n=(null==e?void 0:e.orchestrator)==="local",s=(null==e?void 0:e.orchestrator)==="unknown";return{platform:e,loading:t,error:a,isDocker:l,isKubernetes:i,isLocal:n,isUnknown:s,isFeatureDisabled:r=>{if(t||a||!e)return!1;switch(r){case"docker-only":return!l;case"k8s-only":return!i;case"local-only":return!n;default:return!1}}}}},1927:(e,t,a)=>{Promise.resolve().then(a.bind(a,4869))},2147:(e,t,a)=>{"use strict";a.d(t,{PlatformProvider:()=>c,V:()=>o});var r=a(1929),l=a(2477),i=a(3113);let n=async()=>{try{let e=(0,i.e9)("platform"),t=await fetch(e);if(!t.ok)throw{code:t.status,message:"Failed to fetch platform info"};let a=await t.json();return{orchestrator:({docker:"docker",k8s:"k8s",kubernetes:"k8s",local:"local",unknown:"unknown"})[a.orchestrator]||"unknown",api_version:a.api_version}}catch(e){if(e.code)throw e;throw{code:500,message:e.message||"Failed to fetch platform info"}}},s=(0,l.createContext)(void 0),o=()=>{let e=(0,l.useContext)(s);if(void 0===e)throw Error("usePlatform must be used within a PlatformProvider");return e},c=e=>{let{children:t}=e,[a,i]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0),[u,d]=(0,l.useState)(null),m=async()=>{try{c(!0),d(null);let e=await n();i(e)}catch(e){d(e.message||"Failed to fetch platform info"),console.error("Platform fetch error:",e)}finally{c(!1)}};return(0,l.useEffect)(()=>{m()},[]),(0,r.jsx)(s.Provider,{value:{platform:a,loading:o,error:u,refetch:m},children:t})}},3736:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var r=a(1929),l=a(2477),i=a(3621),n=a(1869),s=a(1611),o=a(9985);function c(e){let{visible:t,title:a,description:c,inputLabel:u,secondaryLabel:d,inputPlaceholder:m,submitButtonText:p,cancelButtonText:h,onComplete:f,onChange:g,initialValue:x="",validation:v,isLoading:b=!1}=e,[w,N]=(0,l.useState)(x),[y,j]=(0,l.useState)(null),[C,I]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&(N(x),j(null),I(!1))},[t,x]);let P=async()=>{if(v){I(!0);try{let e=await v(w);if(e){j(e),I(!1);return}}catch(e){j("Validation failed"),I(!1);return}I(!1)}f(o.R.YES,w||"")},k=()=>{f(o.R.CANCEL)},O=b||C;return(0,r.jsxs)(i.lG,{open:t,onOpenChange:e=>{e||k()},children:[(0,r.jsx)(i.LC,{className:"!fixed !inset-0","aria-hidden":"true",style:{backgroundColor:"rgba(17, 25, 40, 0.25)",backdropFilter:"blur(4px) saturate(30%)",WebkitBackdropFilter:"blur(4px) saturate(30%)",border:"1px solid rgba(255, 255, 255, 0.125)"}}),(0,r.jsxs)(i.Cf,{className:"sm:max-w-[500px] info-modal-container px-9 py-6 shadow-lg bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md",children:[(0,r.jsxs)(i.c7,{children:[(0,r.jsx)(i.L3,{className:"modal-title flex items-center gap-2 mb-4",children:a}),(0,r.jsx)(i.rr,{className:"modal-description mb-4",children:c})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:u}),(0,r.jsx)(s.p,{value:w,onChange:e=>{N(e.target.value),j(null),g&&g(e.target.value)},placeholder:m,className:y?"border-red-500":"input-regular input-border-regular",disabled:b}),y&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:y}),(0,r.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:d})]}),(0,r.jsxs)(i.Es,{className:"mt-6",children:[(0,r.jsx)(n.$,{variant:"outline",className:"btn-tertiary",onClick:k,disabled:O,children:h}),(0,r.jsx)(n.$,{className:"btn-primary",onClick:P,disabled:O,title:O?"Please wait for validation to complete":void 0,children:C?"Validating...":b?"Loading...":p})]})]})]})}var u=a(8387);let d=e=>{let t=e.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"");/^[a-z]/.test(t)||(t="pipeline-".concat(t)),/[a-z0-9]$/.test(t)||(t="".concat(t,"-1")),t.length>30&&(t=t.substring(0,30),/[a-z0-9]$/.test(t)||(t="".concat(t.substring(0,t.length-1),"1")));let a=(0,u.$C)().substring(0,8);return"".concat(t,"-").concat(a)},m=async(e,t)=>{let a=0;for(;a<10;){let r=d(e);try{if(!await t(r))return r}catch(e){return console.warn('Pipeline existence check failed for "'.concat(r,"\", assuming it doesn't exist for local development:"),e),r}a++}return"pipeline-".concat((0,u.$C)().substring(0,32))},p=async(e,t)=>{if(!e.trim())return{id:"",name:e,isValid:!1,error:"Pipeline name is required"};if(e.length<3)return{id:"",name:e,isValid:!1,error:"Pipeline name must be at least 3 characters long"};if(e.length>100)return{id:"",name:e,isValid:!1,error:"Pipeline name must be 100 characters or less"};try{let a=await m(e,t),r=(e=>e.length>40?{isValid:!1,error:"Pipeline ID must be 40 characters or less"}:/^[a-z]/.test(e)?/[a-z0-9]$/.test(e)?/^[a-z0-9-]+$/.test(e)?e.includes("--")?{isValid:!1,error:"Pipeline ID cannot contain consecutive hyphens"}:{isValid:!0}:{isValid:!1,error:"Pipeline ID can only contain lowercase letters, numbers, and hyphens"}:{isValid:!1,error:"Pipeline ID must end with a letter or number"}:{isValid:!1,error:"Pipeline ID must start with a letter"})(a);return{id:a,name:e,isValid:r.isValid,error:r.error}}catch(t){return{id:"",name:e,isValid:!1,error:"Failed to generate pipeline ID"}}};var h=a(1475);let f=e=>{let{visible:t,onComplete:a,mode:i="create",initialValue:n="",currentName:s,isNavigating:o=!1}=e,[u,d]=(0,l.useState)(null),[m,f]=(0,l.useState)(null),[g,x]=(0,l.useState)(!1),[v,b]=(0,l.useState)(""),[w,N]=(0,l.useState)(!1),y=(0,l.useRef)(null),[j,C]=(0,l.useState)(!1),I="rename"===i;(0,l.useEffect)(()=>{t&&(f(null),d(null),b(""),x(!1),N(!1))},[t,s]),(0,l.useEffect)(()=>()=>{y.current&&clearTimeout(y.current)},[]);let P=(0,l.useCallback)(async e=>{if(!e.trim())return"Pipeline name is required";if(e.length<3)return"Pipeline name must be at least 3 characters long";if(e.length>100)return"Pipeline name must be 100 characters or less";if(I)return null;x(!0),f("Generating unique pipeline ID...");try{let t=await p(e,h.pI);if(t.isValid)return b(t.id),d(null),N(!0),f("Generated ID: ".concat(t.id)),null;return b(""),d(t.error||"Invalid pipeline name"),N(!1),f(null),t.error||"Invalid pipeline name"}catch(e){return b(""),d("Failed to validate pipeline name"),N(!1),f(null),"Failed to validate pipeline name"}finally{x(!1)}},[I]),k=(0,l.useCallback)(e=>{y.current&&clearTimeout(y.current);let t=document.querySelector('input[placeholder="e.g., Production Pipeline v1"]'),a=document.activeElement===t;a&&C(!0),y.current=setTimeout(async()=>{let r=await P(e);d(r),!a||r||I||setTimeout(()=>{null==t||t.focus(),C(!1)},50)},1e3)},[P,I]);return(0,r.jsx)(c,{visible:t,title:I?"Rename Pipeline":"Create New Pipeline",description:I?"Enter a new name for your pipeline.":"Enter a name for your pipeline. A unique ID will be generated automatically.",inputLabel:"Name",secondaryLabel:o?"Creating pipeline and navigating to wizard...":m||(I?"Current: ".concat(s):""),inputPlaceholder:"e.g., Production Pipeline v1",submitButtonText:I?"Rename Pipeline":"Create Pipeline",cancelButtonText:I?"Cancel":"Discard",onComplete:(e,t)=>{if("CANCEL"===e)return void a(e);if("YES"===e){if(g||o||!I&&!w)return;a(e,t,v)}},onChange:e=>{d(null),N(!1),f(null),k(e)},initialValue:n,isLoading:g||o,validation:async e=>g?"Generating unique pipeline ID...":o?"Creating pipeline and navigating to wizard...":I||w?u:"Please wait for pipeline ID generation to complete"})}},4869:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var r=a(1929),l=a(9596);let i={src:"/_next/static/media/join.6c829246.svg",height:36,width:36,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/deduplicate.e36e90b2.svg",height:36,width:36,blurWidth:0,blurHeight:0},s={src:"/_next/static/media/deduplicate-join.e743aa1e.svg",height:36,width:36,blurWidth:0,blurHeight:0},o={src:"/_next/static/media/ingest-only.7794612d.svg",height:36,width:36,blurWidth:0,blurHeight:0};var c=a(8090),u=a(7161),d=a(8821),m=a(8387),p=a(2477),h=a(3736),f=a(9985),g=a(4775),x=a(579),v=a(1475),b=a(5555);function w(){let{topicsStore:e,kafkaStore:t,joinStore:a,coreStore:w,resetForNewPipeline:N,resetAllPipelineState:y}=(0,c.useStore)(),j=(0,g.U)(),C=(0,u.useSearchParams)(),I=(null==C?void 0:C.get("showWarning"))==="true",P=null==C?void 0:C.get("from"),[k,O]=(0,p.useState)(I),S=(0,u.useRouter)(),[E,D]=(0,p.useState)(null),[T,z]=(0,p.useState)(!1),[L,V]=(0,p.useState)(!1),[_,A]=(0,p.useState)(0),[F,G]=(0,p.useState)(!1),{setOperationsSelected:R,setPipelineName:J,setPipelineId:W,operationsSelected:Y,enterCreateMode:$}=w,{isDocker:B,isLocal:U}=(0,x.s)();(0,p.useEffect)(()=>{$()},[$]),(0,p.useEffect)(()=>{let e=async()=>{try{let e=await (0,v.Cz)(),t=(0,b.vF)(e);A(t)}catch(e){console.error("Failed to fetch pipelines:",e),A(0)}};(B||U)&&e()},[B,U]),(0,p.useEffect)(()=>{j.page.homepage({referrer:P||document.referrer,timestamp:new Date().toISOString()})},[j.page,P]);let q=e=>{if((B||U)&&_>0)return void G(!0);e===d.Oz.DEDUPLICATION?j.operation.deduplication({operationType:e}):e===d.Oz.JOINING?j.operation.join({operationType:e}):e===d.Oz.DEDUPLICATION_JOINING?j.operation.dedupAndJoin({operationType:e}):e===d.Oz.INGEST_ONLY&&j.operation.ingestOnly({operationType:e}),D(e),z(!0),V(!1)},H=async(e,t,a)=>{V(!0);try{N(e),J(t);let r=a||(0,m.bB)(t);W(r),setTimeout(()=>{S.push("/pipelines/create")},0)}catch(e){V(!1),console.error("Failed to complete operation selection:",e)}},M=async(e,t,a)=>{if(e!==f.R.YES){z(!1),V(!1);return}if(e===f.R.YES&&t)try{await H(E,t,a)}catch(e){console.error("Failed to save configuration:",e),z(!1),V(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6 sm:gap-8 max-w-[var(--hero-container-width)] mx-auto px-4 py-20 sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"title-1 sm:text-3xl lg:text-4xl text-brand-gradient text-center",children:"Welcome!"}),(0,r.jsx)("p",{className:"w-full text-center subtitle muted-foreground text-sm sm:text-base",children:"Create a new pipeline with ready-to-use data operations"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-8 sm:mt-12 w-full max-w-[512px]",children:[(0,r.jsx)("div",{className:(0,m.cn)("card card-elevated",(null==Y?void 0:Y.operation)===d.Oz.DEDUPLICATION&&"active","h-16 sm:h-20 lg:h-24 w-full"),children:(0,r.jsxs)("button",{className:"flex items-center px-4 sm:px-6 w-full h-full",onClick:()=>q(d.Oz.DEDUPLICATION),children:[(0,r.jsx)(l.default,{src:n,alt:"Deduplicate",width:24,height:24,className:"sm:w-9 sm:h-9"}),(0,r.jsx)("span",{className:"ml-3 sm:ml-4 text-sm sm:text-lg font-medium text-muted-foreground",children:"Deduplicate"})]})}),(0,r.jsx)("div",{className:(0,m.cn)("card card-elevated",(null==Y?void 0:Y.operation)===d.Oz.JOINING&&"active","h-16 sm:h-20 lg:h-24 w-full"),children:(0,r.jsxs)("button",{className:"flex items-center px-4 sm:px-6 w-full h-full",onClick:()=>q(d.Oz.JOINING),children:[(0,r.jsx)(l.default,{src:i,alt:"Join",width:24,height:24,className:"sm:w-9 sm:h-9"}),(0,r.jsx)("span",{className:"ml-3 sm:ml-4 text-sm sm:text-lg font-medium text-muted-foreground",children:"Join"})]})}),(0,r.jsx)("div",{className:(0,m.cn)("card card-elevated",(null==Y?void 0:Y.operation)===d.Oz.DEDUPLICATION_JOINING&&"active","h-16 sm:h-20 lg:h-24 w-full"),children:(0,r.jsxs)("button",{className:"flex items-center px-4 sm:px-6 w-full h-full",onClick:()=>q(d.Oz.DEDUPLICATION_JOINING),children:[(0,r.jsx)(l.default,{src:s,alt:"Deduplicate Join",width:24,height:24,className:"sm:w-9 sm:h-9"}),(0,r.jsx)("span",{className:"ml-3 sm:ml-4 text-sm sm:text-lg font-medium text-muted-foreground",children:"Deduplicate & Join"})]})}),(0,r.jsx)("div",{className:(0,m.cn)("card card-elevated",(null==Y?void 0:Y.operation)===d.Oz.INGEST_ONLY&&"active","h-16 sm:h-20 lg:h-24 w-full"),children:(0,r.jsxs)("button",{className:"flex items-center px-4 sm:px-6 w-full h-full",onClick:()=>q(d.Oz.INGEST_ONLY),children:[(0,r.jsx)(l.default,{src:o,alt:"Ingest Only",width:24,height:24,className:"sm:w-9 sm:h-9"}),(0,r.jsx)("span",{className:"ml-3 sm:ml-4 text-sm sm:text-lg font-medium text-muted-foreground",children:"Ingest Only"})]})})]}),(0,r.jsx)(f.W,{visible:k,title:"Warning",description:"Returning to the home page will reset your current pipeline configuration. Are you sure you want to proceed?",okButtonText:"Yes",cancelButtonText:"No",onComplete:e=>{O(!1),e===f.R.YES?y("",!0):S.push(P||"/")}}),(0,r.jsx)(f.W,{visible:F,title:"Pipeline Limit Reached",description:"Only one active pipeline is allowed on ".concat(B?"Docker":"Local"," version. To create a new pipeline, you must first terminate or delete any currently active or paused pipelines."),okButtonText:"Manage Pipelines",cancelButtonText:"Cancel",onComplete:e=>{G(!1),e===f.R.YES&&S.push("/pipelines")}}),(0,r.jsx)(h.A,{visible:T,onComplete:M,isNavigating:L})]})}function N(){return(0,r.jsx)(p.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(w,{})})}}},e=>{e.O(0,[2270,2765,3878,5037,6460,1279,3888,5704,7358],()=>e(e.s=1927)),_N_E=e.O()}]);