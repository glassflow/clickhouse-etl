"use strict";exports.id=5419,exports.ids=[5419],exports.modules={1733:(a,b,c)=>{c.d(b,{A:()=>d});let d={src:"/_next/static/media/trash.a3b60734.svg",height:16,width:16,blurWidth:0,blurHeight:0}},8420:(a,b,c)=>{c.d(b,{R:()=>h,i:()=>g});var d=c(48477),e=c(5375),f=c(26403);let g={CANCEL:"CANCEL",YES:"YES",NO:"NO"};function h({visible:a,title:b,description:c,content:h,okButtonText:i,cancelButtonText:j,onComplete:k,pendingOperation:l,criticalOperation:m}){return(0,d.jsxs)(e.lG,{open:a,onOpenChange:a=>{a||k(g.NO,l||"")},children:[(0,d.jsx)(e.LC,{className:"!fixed !inset-0","aria-hidden":"true",style:{backgroundColor:"rgba(17, 25, 40, 0.25)",backdropFilter:"blur(4px) saturate(30%)",WebkitBackdropFilter:"blur(4px) saturate(30%)",border:"1px solid rgba(255, 255, 255, 0.125)"}}),(0,d.jsxs)(e.Cf,{className:"sm:max-w-[500px] info-modal-container px-9 py-6 shadow-lg bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md",children:[(0,d.jsxs)(e.c7,{children:[(0,d.jsx)(e.L3,{className:"modal-title flex items-center gap-2 mb-8",children:b}),(0,d.jsx)(e.rr,{className:"modal-description text-sm mb-4",children:(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:c}})})]}),h&&(0,d.jsx)("div",{className:"mb-6",children:h}),(0,d.jsxs)(e.Es,{className:"mt-6",children:[(0,d.jsx)(f.$,{variant:"outline",className:"btn-tertiary",onClick:()=>{k(g.NO,l||"")},children:j}),(0,d.jsx)(f.$,{className:m?"btn-critical":"btn-primary",onClick:()=>{k(g.YES,l||"")},children:i})]})]})]})}},9119:(a,b,c)=>{c.d(b,{A:()=>d});let d={src:"/_next/static/media/rename.845033b2.svg",height:16,width:16,blurWidth:0,blurHeight:0}},24022:(a,b,c)=>{c.d(b,{Tt:()=>e});var d=c(54299);let e=async(a,b)=>{try{let c,e={pipeline_id:(c="source"in a&&"sink"in a?a:await (0,d.B0)(a.pipeline_id)).pipeline_id,name:c.name,created_at:c.created_at,source:c.source,join:c.join,sink:c.sink,exported_at:new Date().toISOString(),exported_by:"GlassFlow UI",version:"1.0.0"},f=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0],g=c.name.replace(/[^a-zA-Z0-9-_]/g,"_"),h=`${g}_config_${f}.json`,i=b||h,j=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),k=URL.createObjectURL(j),l=document.createElement("a");l.href=k,l.download=i,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(k),console.log(`Pipeline configuration downloaded: ${i}`)}catch(a){throw console.error("Failed to download pipeline configuration:",a),Error("Failed to download pipeline configuration. Please try again.")}}},24370:(a,b,c)=>{c.d(b,{E:()=>i});var d=c(48477);c(48296);var e=c(29558),f=c(9206),g=c(84621);let h=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-[var(--color-background-neutral)] text-[var(--color-on-background-positive)] [a&]:hover:bg-[var(--color-background-positive)]/90",secondary:"border-transparent bg-[var(--color-background-neutral)] text-[var(--color-on-background-positive)] [a&]:hover:bg-[var(--color-background-positive)]/90",destructive:"border-transparent bg-[var(--color-background-critical)] text-white [a&]:hover:bg-[var(--color-background-critical)]/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",success:"border-transparent bg-[var(--color-background-neutral)] text-[var(--color-rgb-positive)]",warning:"border-transparent bg-[var(--color-background-neutral)] text-[var(--color-rgb-warning)]",error:"border-transparent bg-[var(--color-background-neutral)] text-[var(--color-rgb-negative)]"}},defaultVariants:{variant:"default"}});function i({className:a,variant:b,asChild:c=!1,...f}){let i=c?e.DX:"span";return(0,d.jsx)(i,{"data-slot":"badge",className:(0,g.cn)(h({variant:b}),a),...f})}},29001:(a,b,c)=>{c.d(b,{A:()=>d});let d={src:"/_next/static/media/download-white.854d995f.svg",height:24,width:24,blurWidth:0,blurHeight:0}},31041:(a,b,c)=>{c.d(b,{nk:()=>e});var d=c(66740);let e=async a=>{try{let b=(0,d.e9)(`pipeline/${a}/health`),c=await fetch(b,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)});if(!c.ok){let a=await c.json().catch(()=>({}));throw{code:c.status,message:a.error||`HTTP ${c.status}: Failed to fetch pipeline health`}}let e=await c.json();if(!e.success)throw{code:500,message:e.error||"Failed to fetch pipeline health"};return e.health}catch(a){if("AbortError"===a.name||"TimeoutError"===a.name)throw{code:408,message:"Request timeout - pipeline health check took too long"};if(a.code&&a.message)throw a;throw{code:500,message:a.message||"Unknown error occurred while fetching pipeline health"}}}},34528:(a,b,c)=>{c.d(b,{A:()=>p});var d=c(48477),e=c(48296),f=c(5375),g=c(26403),h=c(4179),i=c(87437);function j({visible:a,title:b,description:c,inputLabel:j,secondaryLabel:k,inputPlaceholder:l,submitButtonText:m,cancelButtonText:n,onComplete:o,onChange:p,initialValue:q="",validation:r,isLoading:s=!1}){let[t,u]=(0,e.useState)(q),[v,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(!1),z=async()=>{if(r){y(!0);try{let a=await r(t);if(a){w(a),y(!1);return}}catch(a){w("Validation failed"),y(!1);return}y(!1)}o(i.R.YES,t||"")},A=()=>{o(i.R.CANCEL)},B=s||x;return(0,d.jsxs)(f.lG,{open:a,onOpenChange:a=>{a||A()},children:[(0,d.jsx)(f.LC,{className:"!fixed !inset-0","aria-hidden":"true",style:{backgroundColor:"rgba(17, 25, 40, 0.25)",backdropFilter:"blur(4px) saturate(30%)",WebkitBackdropFilter:"blur(4px) saturate(30%)",border:"1px solid rgba(255, 255, 255, 0.125)"}}),(0,d.jsxs)(f.Cf,{className:"sm:max-w-[500px] info-modal-container px-9 py-6 shadow-lg bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md",children:[(0,d.jsxs)(f.c7,{children:[(0,d.jsx)(f.L3,{className:"modal-title flex items-center gap-2 mb-4",children:b}),(0,d.jsx)(f.rr,{className:"modal-description mb-4",children:c})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:j}),(0,d.jsx)(h.p,{value:t,onChange:a=>{u(a.target.value),w(null),p&&p(a.target.value)},placeholder:l,className:v?"border-red-500":"input-regular input-border-regular",disabled:s}),v&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:v}),(0,d.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:k})]}),(0,d.jsxs)(f.Es,{className:"mt-6",children:[(0,d.jsx)(g.$,{variant:"outline",className:"btn-tertiary",onClick:A,disabled:B,children:n}),(0,d.jsx)(g.$,{className:"btn-primary",onClick:z,disabled:B,title:B?"Please wait for validation to complete":void 0,children:x?"Validating...":s?"Loading...":m})]})]})]})}var k=c(84621);let l=a=>{let b=a.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"");/^[a-z]/.test(b)||(b=`pipeline-${b}`),/[a-z0-9]$/.test(b)||(b=`${b}-1`),b.length>30&&(b=b.substring(0,30),/[a-z0-9]$/.test(b)||(b=`${b.substring(0,b.length-1)}1`));let c=(0,k.$C)().substring(0,8);return`${b}-${c}`},m=async(a,b)=>{let c=0;for(;c<10;){let d=l(a);try{if(!await b(d))return d}catch(a){return console.warn(`Pipeline existence check failed for "${d}", assuming it doesn't exist for local development:`,a),d}c++}return`pipeline-${(0,k.$C)().substring(0,32)}`},n=async(a,b)=>{if(!a.trim())return{id:"",name:a,isValid:!1,error:"Pipeline name is required"};if(a.length<3)return{id:"",name:a,isValid:!1,error:"Pipeline name must be at least 3 characters long"};if(a.length>100)return{id:"",name:a,isValid:!1,error:"Pipeline name must be 100 characters or less"};try{let c=await m(a,b),d=(a=>a.length>40?{isValid:!1,error:"Pipeline ID must be 40 characters or less"}:/^[a-z]/.test(a)?/[a-z0-9]$/.test(a)?/^[a-z0-9-]+$/.test(a)?a.includes("--")?{isValid:!1,error:"Pipeline ID cannot contain consecutive hyphens"}:{isValid:!0}:{isValid:!1,error:"Pipeline ID can only contain lowercase letters, numbers, and hyphens"}:{isValid:!1,error:"Pipeline ID must end with a letter or number"}:{isValid:!1,error:"Pipeline ID must start with a letter"})(c);return{id:c,name:a,isValid:d.isValid,error:d.error}}catch(b){return{id:"",name:a,isValid:!1,error:"Failed to generate pipeline ID"}}};var o=c(54299);let p=({visible:a,onComplete:b,mode:c="create",initialValue:f="",currentName:g,isNavigating:h=!1})=>{let[i,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(null),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(!1),v=(0,e.useRef)(null),[w,x]=(0,e.useState)(!1),y="rename"===c;(0,e.useEffect)(()=>{a&&(m(null),k(null),s(""),q(!1),u(!1))},[a,g]),(0,e.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]);let z=(0,e.useCallback)(async a=>{if(!a.trim())return"Pipeline name is required";if(a.length<3)return"Pipeline name must be at least 3 characters long";if(a.length>100)return"Pipeline name must be 100 characters or less";if(y)return null;q(!0),m("Generating unique pipeline ID...");try{let b=await n(a,o.pI);if(b.isValid)return s(b.id),k(null),u(!0),m(`Generated ID: ${b.id}`),null;return s(""),k(b.error||"Invalid pipeline name"),u(!1),m(null),b.error||"Invalid pipeline name"}catch(a){return s(""),k("Failed to validate pipeline name"),u(!1),m(null),"Failed to validate pipeline name"}finally{q(!1)}},[y]),A=(0,e.useCallback)(a=>{v.current&&clearTimeout(v.current);let b=document.querySelector('input[placeholder="e.g., Production Pipeline v1"]'),c=document.activeElement===b;c&&x(!0),v.current=setTimeout(async()=>{let d=await z(a);k(d),!c||d||y||setTimeout(()=>{b?.focus(),x(!1)},50)},1e3)},[z,y]);return(0,d.jsx)(j,{visible:a,title:y?"Rename Pipeline":"Create New Pipeline",description:y?"Enter a new name for your pipeline.":"Enter a name for your pipeline. A unique ID will be generated automatically.",inputLabel:"Name",secondaryLabel:h?"Creating pipeline and navigating to wizard...":l||(y?`Current: ${g}`:""),inputPlaceholder:"e.g., Production Pipeline v1",submitButtonText:y?"Rename Pipeline":"Create Pipeline",cancelButtonText:y?"Cancel":"Discard",onComplete:(a,c)=>{if("CANCEL"===a)return void b(a);if("YES"===a){if(p||h||!y&&!t)return;b(a,c,r)}},onChange:a=>{k(null),u(!1),m(null),A(a)},initialValue:f,isLoading:p||h,validation:async a=>p?"Generating unique pipeline ID...":h?"Creating pipeline and navigating to wizard...":y||t?i:"Please wait for pipeline ID generation to complete"})}},36241:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(48477),e=c(8420);let f=function({visible:a,onOk:b,onCancel:c}){return(0,d.jsx)(e.R,{visible:a,title:"Stop Pipeline?",description:`<div>
        <div style="margin-bottom: 16px;">Any events currently in the queue will be processed before stopping, which may take some time.</div>
        <div>Are you sure you want to stop?</div>
      </div>`,okButtonText:"Stop",cancelButtonText:"Cancel",onComplete:a=>{a===e.i.YES?b():c()},criticalOperation:!1})}},43188:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(48477),e=c(8420);let f=function({visible:a,onOk:b,onCancel:c}){return(0,d.jsx)(e.R,{visible:a,title:"Terminate Pipeline?",description:`<div>
        <div style="margin-bottom: 16px;">The pipeline will be terminated immediately without processing remaining events in the queue.</div>
        <div>Are you sure you want to terminate the pipeline?</div>
      </div>`,okButtonText:"Terminate Pipeline",cancelButtonText:"Cancel",onComplete:a=>{a===e.i.YES?b():c()},criticalOperation:!0})}},50899:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(48477),e=c(87437),f=c(34528);let g=function({visible:a,onOk:b,onCancel:c,currentName:g}){return(0,d.jsx)(f.A,{visible:a,onComplete:(a,d)=>{a===e.R.YES&&d?b(d):c()},mode:"rename",initialValue:g,currentName:g})}},53061:(a,b,c)=>{c.d(b,{A:()=>d});let d={src:"/_next/static/media/stop-white.60be44d6.svg",height:16,width:16,blurWidth:0,blurHeight:0}},75299:(a,b,c)=>{c.d(b,{er:()=>i,h_:()=>f,lB:()=>g,uv:()=>h,xJ:()=>e});var d=c(48296);function e(){let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(null),f=()=>{b(!1),e(null)};return{isStopModalVisible:a,selectedPipeline:c,openStopModal:a=>{e(a),b(!0)},closeStopModal:f,onOk:f,onCancel:f}}function f(){let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(null),f=()=>{b(!1),e(null)};return{isRenameModalVisible:a,selectedPipeline:c,openRenameModal:a=>{e(a),b(!0)},closeRenameModal:f,onOk:f,onCancel:f}}function g(){let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(null),f=()=>{b(!1),e(null)};return{isEditModalVisible:a,selectedPipeline:c,openEditModal:a=>{e(a),b(!0)},closeEditModal:f,onOk:f,onCancel:f}}function h(){let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(null),[f,g]=(0,d.useState)(null),h=()=>{b(!1),e(null),g(null)};return{isEditConfirmationModalVisible:a,selectedPipeline:c,selectedStep:f,openEditConfirmationModal:(a,c)=>{e(a),g(c),b(!0)},closeEditConfirmationModal:h,onOk:h,onCancel:h}}function i(){let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(null),f=()=>{b(!1),e(null)};return{isTerminateModalVisible:a,selectedPipeline:c,openTerminateModal:a=>{e(a),b(!0)},closeTerminateModal:f,onOk:f,onCancel:f}}},92940:(a,b,c)=>{c.d(b,{RP:()=>o,qs:()=>q,c7:()=>p,Tu:()=>n});var d=c(48296),e=c(54299),f=c(31041),g=c(48661);class h{static{this.instance=null}constructor(){this.trackers=new Map,this.backendSyncInterval=null,this.stats={activeTrackers:0,totalPollingOperations:0,backendSyncEnabled:!0,lastBackendSync:null,orphanedPipelinesDetected:0},this.MAX_ERROR_COUNT=5,this.ERROR_BACKOFF_TIME=3e4,this.BACKEND_SYNC_INTERVAL=3e4,this.DEFAULT_MAX_DURATION=30,this.startBackendSyncMonitor(),this.setupGlobalCleanup()}static getInstance(){return h.instance||(h.instance=new h),h.instance}trackPipeline(a,b,c={}){this.stopTracking(a);let d={pipelineId:a,callbacks:b,options:{maxDurationMinutes:this.DEFAULT_MAX_DURATION,operationName:"status check",enableBackgroundSync:!0,...c},currentStatus:null,elapsedTime:0,timeoutId:null,isActive:!0,errorCount:0,lastErrorTime:0,operationName:c.operationName||"status check"};this.trackers.set(a,d),this.stats.activeTrackers=this.trackers.size,console.log(`[PipelineStatusManager] Started tracking pipeline ${a} for ${d.operationName}`,{maxDuration:d.options.maxDurationMinutes}),this.scheduleNextCheck(d)}stopTracking(a){let b=this.trackers.get(a);return!!b&&(this.destroyTracker(b),this.trackers.delete(a),this.stats.activeTrackers=this.trackers.size,console.log(`[PipelineStatusManager] Stopped tracking pipeline ${a}`),!0)}killAllTracking(){console.log(`[PipelineStatusManager] Killing all ${this.trackers.size} active tracking operations`),this.trackers.forEach(a=>{this.destroyTracker(a)}),this.trackers.clear(),this.stats.activeTrackers=0,console.log("[PipelineStatusManager] All tracking operations killed")}getTrackingStatus(a){let b=this.trackers.get(a);return b?{isTracking:b.isActive,currentStatus:b.currentStatus,elapsedTime:b.elapsedTime,operationName:b.operationName}:null}getStats(){return{...this.stats}}setBackendSyncEnabled(a){this.stats.backendSyncEnabled=a,a&&!this.backendSyncInterval?this.startBackendSyncMonitor():!a&&this.backendSyncInterval&&(clearInterval(this.backendSyncInterval),this.backendSyncInterval=null)}async syncWithBackend(){await this.detectOrphanedPipelines()}static destroy(){h.instance&&(h.instance.killAllTracking(),h.instance.backendSyncInterval&&clearInterval(h.instance.backendSyncInterval),h.instance=null)}scheduleNextCheck(a){if(!a.isActive)return;let b=this.getNextInterval(a.elapsedTime),c=60*(a.options.maxDurationMinutes||this.DEFAULT_MAX_DURATION)*1e3;a.timeoutId=setTimeout(async()=>{if(!a.isActive)return;if(a.elapsedTime+=b,a.elapsedTime>=c){console.log(`[PipelineStatusManager] Timeout reached for ${a.operationName} on pipeline ${a.pipelineId}`,{elapsedMinutes:Math.floor(a.elapsedTime/6e4)}),a.callbacks.onTimeout?.(),this.stopTracking(a.pipelineId);return}let d=Date.now();if(a.errorCount>=this.MAX_ERROR_COUNT&&d-a.lastErrorTime<this.ERROR_BACKOFF_TIME){console.log(`[PipelineStatusManager] Error backoff active for pipeline ${a.pipelineId}, skipping check`),this.scheduleNextCheck(a);return}await this.performStatusCheck(a),a.isActive&&this.scheduleNextCheck(a)},b);let d=Math.floor(a.elapsedTime/6e4),e=Math.floor(a.elapsedTime%6e4/1e3);console.log(`[PipelineStatusManager] Next ${a.operationName} check for ${a.pipelineId} in ${b/1e3}s (elapsed: ${d}m ${e}s)`)}async performStatusCheck(a){this.stats.totalPollingOperations++;try{let b=await (0,f.nk)(a.pipelineId),c=(0,g.U)(b.overall_status),d=a.currentStatus;console.log(`[PipelineStatusManager] Status check for ${a.pipelineId}: ${d} → ${c} (health: ${b.overall_status})`),a.currentStatus=c,a.errorCount=0,d!==c&&a.callbacks.onStatusChange?.(c,d),this.isFinalStatus(c)&&(console.log(`[PipelineStatusManager] Status ${c} is final for pipeline ${a.pipelineId}, stopping tracking`),this.stopTracking(a.pipelineId))}catch(c){a.errorCount++,a.lastErrorTime=Date.now();let b=c instanceof Error?c.message:"Unknown error";console.error(`[PipelineStatusManager] Status check failed for ${a.pipelineId} (attempt ${a.errorCount}/${this.MAX_ERROR_COUNT}):`,b),a.callbacks.onError?.(c instanceof Error?c:Error(b)),a.errorCount>=this.MAX_ERROR_COUNT&&(console.error(`[PipelineStatusManager] Max errors reached for pipeline ${a.pipelineId}, stopping tracking`),this.stopTracking(a.pipelineId))}}getNextInterval(a){return a<6e4?2e3:a<12e4?5e3:a<18e4?1e4:a<24e4?15e3:3e4}isFinalStatus(a){return["stopped","failed"].includes(a)}destroyTracker(a){a.isActive=!1,a.timeoutId&&(clearTimeout(a.timeoutId),a.timeoutId=null),a.callbacks.onDestroyed?.()}startBackendSyncMonitor(){this.backendSyncInterval&&clearInterval(this.backendSyncInterval),this.backendSyncInterval=setInterval(()=>{this.stats.backendSyncEnabled&&this.trackers.size>0&&this.detectOrphanedPipelines().catch(a=>{console.error("[PipelineStatusManager] Backend sync failed:",a)})},this.BACKEND_SYNC_INTERVAL),console.log("[PipelineStatusManager] Backend sync monitor started")}async detectOrphanedPipelines(){try{let a=Array.from(this.trackers.keys());if(0===a.length)return;console.log(`[PipelineStatusManager] Syncing ${a.length} tracked pipelines with backend`);let b=(await (0,e.Cz)()).map(a=>a.pipeline_id),c=a.filter(a=>!b.includes(a));c.length>0&&(console.warn(`[PipelineStatusManager] Detected ${c.length} orphaned pipelines (removed from backend):`,c),c.forEach(a=>{let b=this.trackers.get(a);b&&(console.log(`[PipelineStatusManager] Stopping tracking for orphaned pipeline ${a}`),b.callbacks.onError?.(Error(`Pipeline ${a} no longer exists in backend`)),this.stopTracking(a))}),this.stats.orphanedPipelinesDetected+=c.length),this.stats.lastBackendSync=new Date}catch(a){console.error("[PipelineStatusManager] Failed to detect orphaned pipelines:",a)}}setupGlobalCleanup(){}}let i=h.getInstance(),j=new Map,k=new Set;class l{getPipelineStatus(a){return j.get(a)||null}setPipelineStatus(a,b){let c=j.get(a);c!==b&&(console.log(`[PipelineStateManager] Status update: ${a} ${c} → ${b}`),j.set(a,b),k.forEach(c=>{try{c(a,b)}catch(a){console.error("[PipelineStateManager] Listener error:",a)}}))}subscribeTo(a){return k.add(a),()=>k.delete(a)}reportOperation(a,b){console.log(`[PipelineStateManager] Operation reported: ${b} on ${a}`),this.shouldTrackOperation(b)&&(console.log(`[PipelineStateManager] Starting tracking for ${a} (${b})`),i.trackPipeline(a,{onStatusChange:(b,c)=>{console.log(`[PipelineStateManager] Tracked status change: ${a} ${c} → ${b}`),this.setPipelineStatus(a,b)},onError:b=>{console.error(`[PipelineStateManager] Tracking error for ${a}:`,b)},onTimeout:()=>{console.log(`[PipelineStateManager] Tracking timeout for ${a}`)},onDestroyed:()=>{console.log(`[PipelineStateManager] Tracking stopped for ${a}`)}},{operationName:b,maxDurationMinutes:this.getMaxDurationForOperation(b)}))}reportOptimisticUpdate(a,b){console.log(`[PipelineStateManager] Optimistic update: ${a} → ${b}`),this.setPipelineStatus(a,b)}startMonitoring(a){console.log(`[PipelineStateManager] Starting general monitoring for ${a.length} pipelines`),a.forEach(a=>this.monitoredPipelines.add(a)),a.forEach(a=>{i.trackPipeline(a,{onStatusChange:(b,c)=>{console.log(`[PipelineStateManager] General monitoring: ${a} ${c} → ${b}`),this.setPipelineStatus(a,b)},onError:b=>{console.error(`[PipelineStateManager] General monitoring error for ${a}:`,b)}},{operationName:"general monitoring",maxDurationMinutes:60})})}stopMonitoring(a){a?(console.log(`[PipelineStateManager] Stopping monitoring for ${a}`),this.monitoredPipelines.delete(a),i.stopTracking(a)):(console.log("[PipelineStateManager] Stopping all monitoring"),this.monitoredPipelines.clear(),i.killAllTracking())}cleanup(){console.log("[PipelineStateManager] Cleaning up"),this.stopMonitoring(),j.clear(),k.clear()}shouldTrackOperation(a){switch(a){case"stop":case"resume":case"terminate":case"deploy":return!0;default:return!1}}getMaxDurationForOperation(a){switch(a){case"stop":default:return 30;case"resume":return 10;case"terminate":return 15;case"deploy":return 20}}constructor(){this.monitoredPipelines=new Set}}let m=new l;function n(a){let[b,c]=(0,d.useState)(m.getPipelineStatus(a));return b}function o(a){let[b,c]=(0,d.useState)(()=>{let b={};return a.forEach(a=>{b[a]=m.getPipelineStatus(a)}),b});return b}function p(){return{reportStop:a=>{m.reportOptimisticUpdate(a,"stopping"),m.reportOperation(a,"stop")},reportResume:a=>{m.reportOptimisticUpdate(a,"resuming"),m.reportOperation(a,"resume")},reportTerminate:a=>{m.reportOptimisticUpdate(a,"terminating"),m.reportOperation(a,"terminate")},reportDeploy:a=>{m.reportOptimisticUpdate(a,"active"),m.reportOperation(a,"deploy")},reportDelete:a=>{m.reportOptimisticUpdate(a,"stopped")},revertOptimisticUpdate:(a,b)=>{m.reportOptimisticUpdate(a,b)}}}function q(a){}}};