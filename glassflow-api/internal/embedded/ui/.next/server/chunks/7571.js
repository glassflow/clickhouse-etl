exports.id=7571,exports.ids=[7571],exports.modules={1442:(a,b,c)=>{"use strict";c.d(b,{gt:()=>n,D4:()=>p,cR:()=>o,Al:()=>g,sB:()=>m,sc:()=>j,Nh:()=>l,dx:()=>r,DB:()=>i,Dm:()=>h,$Q:()=>q,fU:()=>k});var d=c(13376),e=c(86130);let f=(a,b)=>{let c=e.z[a];if(!c)return void console.warn(`Event with key ${a} not found in dictionary`);(0,d.u4)({event:c,context:c.name,properties:b})},g={consentGiven:a=>f("Consent_Given",a),consentNotGiven:a=>f("Consent_NotGiven",a),feedbackSubmitted:a=>f("Feedback_Submitted",a)},h={homepage:a=>f("P0_Homepage",a),setupKafkaConnection:a=>f("P1_SetupKafkaConnection",a),selectTopic:a=>f("P2_SelectTopic",a),selectLeftTopic:a=>f("P2_SelectLeftTopic",a),selectRightTopic:a=>f("P2_1_SelectRightTopic",a),deduplicationKey:a=>f("P3_DeduplicationKey",a),topicDeduplication:a=>f("P3_TopicDeduplication",a),joinKey:a=>f("P3_JoinKey",a),setupClickhouseConnection:a=>f("P4_SetupClickhouseConnection",a),selectDestination:a=>f("P5_SelectDestination",a),pipelines:a=>f("P6_Pipelines",a)},i={deduplication:a=>f("Deduplication_Clicked",a),join:a=>f("Join_Clicked",a),dedupAndJoin:a=>f("DedupAndJoin_Clicked",a),ingestOnly:a=>f("IngestOnly_Clicked",a)},j={started:a=>f("KafkaConnection_Started",a),failed:a=>f("KafkaConnection_Failed",a),success:a=>f("KafkaConnection_Success",a)},k={selected:a=>f("TopicSelected",a),eventReceived:a=>f("TopicSelected_EventReceived",a),noEvent:a=>f("TopicSelected_NoEvent",a),eventError:a=>f("TopicSelected_EventError",a)},l={dedupKey:a=>f("DedupKeySelected",a),leftJoinKey:a=>f("LeftJoinKeySelected",a),rightJoinKey:a=>f("RightJoinKeySelected",a)},m={configurationStarted:a=>f("JoinConfiguration_Started",a),fieldChanged:a=>f("JoinConfiguration_FieldChanged",a),streamConfigured:a=>f("JoinConfiguration_StreamConfigured",a),configurationCompleted:a=>f("JoinConfiguration_Completed",a),validationFailed:a=>f("JoinConfiguration_ValidationFailed",a)},n={started:a=>f("ClickhouseConnection_Started",a),failed:a=>f("ClickhouseConnection_Failed",a),success:a=>f("ClickhouseConnection_Success",a)},o={databaseSelected:a=>f("Destination_DatabaseSelected",a),tableSelected:a=>f("Destination_TableSelected",a),columnsShowed:a=>f("Destination_ColumnsShowed",a),columnsSelected:a=>f("Destination_ColumnsSelected",a),databasesFetched:a=>f("Destination_DatabasesFetched",a),tablesFetched:a=>f("Destination_TablesFetched",a),mappingCompleted:a=>f("Destination_MappingCompleted",a),databaseFetchedError:a=>f("Destination_DatabaseFetchedError",a),tableFetchedError:a=>f("Destination_TableFetchedError",a)},p={clicked:a=>f("Deploy_Clicked",a),failed:a=>f("Deploy_Failed",a),success:a=>f("Deploy_Success",a)},q={pauseClicked:a=>f("PipelinePause_Clicked",a),pauseFailed:a=>f("PipelinePause_Failed",a),pauseSuccess:a=>f("PipelinePause_Success",a),resumeClicked:a=>f("PipelineResume_Clicked",a),resumeFailed:a=>f("PipelineResume_Failed",a),resumeSuccess:a=>f("PipelineResume_Success",a),renameClicked:a=>f("PipelineRename_Clicked",a),renameFailed:a=>f("PipelineRename_Failed",a),renameSuccess:a=>f("PipelineRename_Success",a),editClicked:a=>f("PipelineEdit_Clicked",a),editFailed:a=>f("PipelineEdit_Failed",a),editSuccess:a=>f("PipelineEdit_Success",a),deleteClicked:a=>f("PipelineDelete_Clicked",a),deleteFailed:a=>f("PipelineDelete_Failed",a),deleteSuccess:a=>f("PipelineDelete_Success",a),modifyClicked:a=>f("PipelineModify_Clicked",a),modifyFailed:a=>f("PipelineModify_Failed",a),modifySuccess:a=>f("PipelineModify_Success",a),existingPipeline:a=>f("Pipeline_ExistingPipeline",a),existingSamePipeline:a=>f("Pipeline_ExistingSamePipeline",a)},r={createEntered:a=>f("Mode_CreateEntered",a),editEntered:a=>f("Mode_EditEntered",a),viewEntered:a=>f("Mode_ViewEntered",a)}},5375:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>k,Es:()=>m,L3:()=>n,LC:()=>j,c7:()=>l,lG:()=>h,rr:()=>o});var d=c(48477);c(48296);var e=c(6255),f=c(71877),g=c(84621);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dialog",...a})}function i({...a}){return(0,d.jsx)(e.ZL,{"data-slot":"dialog-portal",...a})}function j({className:a,...b}){return(0,d.jsx)(e.hJ,{"data-slot":"dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function k({className:a,children:b,...c}){return(0,d.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,d.jsx)(j,{}),(0,d.jsxs)(e.UC,{"data-slot":"dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c,children:[b,(0,d.jsxs)(e.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)(f.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function l({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function m({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function n({className:a,...b}){return(0,d.jsx)(e.hE,{"data-slot":"dialog-title",className:(0,g.cn)("text-lg leading-none font-semibold",a),...b})}function o({className:a,...b}){return(0,d.jsx)(e.VY,{"data-slot":"dialog-description",className:(0,g.cn)("text-muted-foreground text-sm",a),...b})}},13376:(a,b,c)=>{"use strict";c.d(b,{Bu:()=>g,sw:()=>h,u4:()=>i});var d=c(86130);d.z.Consent_Given.name,d.z.Consent_NotGiven.name,d.z.Feedback_Submitted.name,d.z.P0_Homepage.name,d.z.P1_SetupKafkaConnection.name,d.z.P2_SelectTopic.name,d.z.P2_SelectLeftTopic.name,d.z.P2_1_SelectRightTopic.name,d.z.P3_DeduplicationKey.name,d.z.P3_JoinKey.name,d.z.P3_TopicDeduplication.name,d.z.P4_SetupClickhouseConnection.name,d.z.P5_SelectDestination.name,d.z.P6_Pipelines.name,d.z.Deduplication_Clicked.name,d.z.Join_Clicked.name,d.z.DedupAndJoin_Clicked.name,d.z.IngestOnly_Clicked.name,d.z.KafkaConnection_Started.name,d.z.KafkaConnection_Failed.name,d.z.KafkaConnection_Success.name,d.z.TopicSelected.name,d.z.TopicSelected_EventReceived.name,d.z.TopicSelected_NoEvent.name,d.z.TopicSelected_EventError.name,d.z.DedupKeySelected.name,d.z.LeftJoinKeySelected.name,d.z.RightJoinKeySelected.name,d.z.JoinConfiguration_Started.name,d.z.JoinConfiguration_FieldChanged.name,d.z.JoinConfiguration_StreamConfigured.name,d.z.JoinConfiguration_Completed.name,d.z.JoinConfiguration_ValidationFailed.name,d.z.ClickhouseConnection_Started.name,d.z.ClickhouseConnection_Failed.name,d.z.ClickhouseConnection_Success.name,d.z.Destination_DatabaseSelected.name,d.z.Destination_TableSelected.name,d.z.Destination_ColumnsShowed.name,d.z.Destination_ColumnsSelected.name,d.z.Destination_DatabaseFetched.name,d.z.Destination_TableFetched.name,d.z.Destination_MappingCompleted.name,d.z.Destination_DatabaseFetchedError.name,d.z.Destination_TableFetchedError.name,d.z.Deploy_Clicked.name,d.z.Deploy_Failed.name,d.z.Deploy_Success.name,d.z.PipelinePause_Clicked.name,d.z.PipelinePause_Failed.name,d.z.PipelinePause_Success.name,d.z.PipelineResume_Clicked.name,d.z.PipelineResume_Failed.name,d.z.PipelineResume_Success.name,d.z.PipelineRename_Clicked.name,d.z.PipelineRename_Failed.name,d.z.PipelineRename_Success.name,d.z.PipelineEdit_Clicked.name,d.z.PipelineEdit_Failed.name,d.z.PipelineEdit_Success.name,d.z.PipelineDelete_Clicked.name,d.z.PipelineDelete_Failed.name,d.z.PipelineDelete_Success.name,d.z.PipelineModify_Clicked.name,d.z.PipelineModify_Failed.name,d.z.PipelineModify_Success.name,d.z.Pipeline_ExistingPipeline.name,d.z.Pipeline_ExistingSamePipeline.name,d.z.Mode_CreateEntered.name,d.z.Mode_EditEntered.name,d.z.Mode_ViewEntered.name,c(84621);var e=c(29128);let f=process.env.NEXT_PUBLIC_MIXPANEL_TOKEN||"209670ec9b352915013a5dfdb169dd25",g=()=>{try{f.substring(0,4),f.substring(f.length-4),e.A.init(f,{persistence:"localStorage",debug:!1,autocapture:!1,track_pageview:"url-with-path"}),e.A.set_config({debug:!1})}catch(a){console.error("Failed to initialize analytics:",a)}},h=a=>{try{return}catch(a){console.error("Failed to set user identity:",a)}},i=({event:a,context:b,properties:c})=>{let{overrideTrackingConsent:d}=c||{};try{return}catch(a){console.error("Error in track function:",a)}}},13576:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,56799,23)),Promise.resolve().then(c.bind(c,90480)),Promise.resolve().then(c.bind(c,34518)),Promise.resolve().then(c.bind(c,23933)),Promise.resolve().then(c.bind(c,51112)),Promise.resolve().then(c.bind(c,55300)),Promise.resolve().then(c.bind(c,27154))},14870:(a,b,c)=>{"use strict";c.d(b,{AnalyticsProvider:()=>e});var d=c(48477);function e({children:a}){return(0,d.jsx)(d.Fragment,{children:a})}c(48296),c(13376),c(84621),c(11023)},22621:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d={src:"/_next/static/media/plus.54159413.svg",height:16,width:16,blurWidth:0,blurHeight:0}},23933:(a,b,c)=>{"use strict";c.d(b,{Header:()=>d});let d=(0,c(13383).registerClientReference)(function(){throw Error("Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/shared/Header.tsx","Header")},26403:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(48477);c(48296);var e=c(29558),f=c(9206),g=c(84621);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 disabled:opacity-50 disabled:pointer-events-none",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground disabled:opacity-50 disabled:pointer-events-none",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80 disabled:opacity-50 disabled:pointer-events-none",ghost:"hover:bg-accent hover:text-accent-foreground disabled:opacity-50 disabled:pointer-events-none",link:"text-primary underline-offset-4 hover:underline disabled:opacity-50 disabled:pointer-events-none",gradient:"rounded-md bg-gradient-to-br from-[#FFA959] to-[#E7872E] shadow-[0px_0px_4px_0px_rgba(0,0,0,0.20),0px_4px_8px_0px_rgba(0,0,0,0.30)] hover:shadow-[0px_0px_6px_0px_rgba(0,0,0,0.25),0px_6px_12px_0px_rgba(0,0,0,0.35)] disabled:bg-gradient-to-br disabled:from-[#9A9A9A] disabled:to-[#6E6E6E] disabled:shadow-[0px_0px_2px_0px_rgba(0,0,0,0.10),0px_2px_4px_0px_rgba(0,0,0,0.15)] disabled:pointer-events-none"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9",custom:"min-w-9 min-h-9 px-3 py-2 gap-2"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},27154:(a,b,c)=>{"use strict";c.d(b,{PlatformProvider:()=>e});var d=c(13383);(0,d.registerClientReference)(function(){throw Error("Attempted to call usePlatform() from the server but usePlatform is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/contexts/PlatformContext.tsx","usePlatform");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call PlatformProvider() from the server but PlatformProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/contexts/PlatformContext.tsx","PlatformProvider")},29276:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,75755,23)),Promise.resolve().then(c.t.bind(c,52842,23)),Promise.resolve().then(c.t.bind(c,8652,23)),Promise.resolve().then(c.t.bind(c,63475,23)),Promise.resolve().then(c.t.bind(c,23843,23)),Promise.resolve().then(c.t.bind(c,48331,23)),Promise.resolve().then(c.t.bind(c,56891,23)),Promise.resolve().then(c.t.bind(c,75901,23)),Promise.resolve().then(c.t.bind(c,82259,23))},34518:(a,b,c)=>{"use strict";c.d(b,{HealthCheckProvider:()=>d});let d=(0,c(13383).registerClientReference)(function(){throw Error("Attempted to call HealthCheckProvider() from the server but HealthCheckProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/providers/HealthCheckProvider.tsx","HealthCheckProvider")},44041:(a,b,c)=>{"use strict";c.d(b,{Header:()=>A});var d=c(48477),e=c(48296),f=c(78864);let g={src:"/_next/static/media/logo-full-name.71a530b2.svg",height:24,width:160,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/list.b7d0b0f2.svg",height:16,width:16,blurWidth:0,blurHeight:0};var i=c(22621);let j={src:"/_next/static/media/chevron-down.978a5cc5.svg",height:16,width:16,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/chevron-up.d51bfa59.svg",height:16,width:16,blurWidth:0,blurHeight:0};var l=c(73584),m=c.n(l),n=c(84135),o=c(64708),p=c(87437),q=c(54299);let r={src:"/_next/static/media/help-questionmark.abe8e31f.svg",height:800,width:800,blurWidth:0,blurHeight:0};var s=c(26403),t=c(49679);let u={src:"/_next/static/media/menu-burger-horizontal.8bb9e68a.svg",height:800,width:800,blurWidth:0,blurHeight:0};var v=c(54137);let w=()=>{let{platform:a,loading:b,error:c}=(0,v.V)();return b?(0,d.jsx)("span",{className:"text-xs",style:{color:"#A8ADB8"},children:"Loading..."}):c||!a||"k8s"===a.orchestrator?null:(0,d.jsx)("span",{className:"text-xs",style:{color:"#A8ADB8"},children:(a=>{switch(a){case"docker":return"Docker version";case"k8s":return"Kubernetes version";case"local":return"Local version";default:return"Unknown version"}})(a.orchestrator)})},x=({href:a,icon:b,label:c,isActive:e,onMouseEnter:g,onMouseLeave:h,navRef:i})=>(0,d.jsx)("li",{ref:i,className:"text-sm font-medium relative group h-full flex items-center pt-3",onMouseEnter:g,onMouseLeave:h,children:(0,d.jsxs)(m(),{href:a,className:"flex items-center gap-2 transition-colors whitespace-nowrap min-w-[60px] px-4 pb-2 h-full",children:[(0,d.jsx)(f.default,{src:b,alt:c,width:24,height:24}),c]})}),y=({href:a,icon:b,label:c,onClick:e})=>(0,d.jsx)("li",{className:"text-sm font-medium",children:(0,d.jsxs)(m(),{href:a,className:"flex items-center gap-3 px-4 py-3 transition-colors hover:bg-gray-800 rounded-md",onClick:e,children:[(0,d.jsx)(f.default,{src:b,alt:c,width:20,height:20}),c]})}),z=({isOpen:a,setIsOpen:b})=>{let c=(0,e.useRef)(null);(0,e.useEffect)(()=>{let d=a=>{c.current&&!c.current.contains(a.target)&&b(!1)},e=a=>{"Escape"===a.key&&b(!1)};return a&&(document.addEventListener("mousedown",d),document.addEventListener("keydown",e)),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",e)}},[a,b]);let g=()=>{b(!1)};return(0,d.jsxs)("div",{className:"relative",ref:c,children:[(0,d.jsxs)(s.$,{variant:"ghost",className:"p-2 lg:px-3 lg:py-2",onClick:()=>b(!a),children:[(0,d.jsx)("div",{className:"lg:hidden",children:(0,d.jsx)(f.default,{src:r,alt:"Help",width:24,height:24})}),(0,d.jsxs)("div",{className:"hidden lg:flex items-center gap-2 cursor-pointer",children:["Help",(0,d.jsx)(f.default,{src:a?k:j,alt:"Toggle",width:16,height:16})]})]}),(0,d.jsxs)("div",{className:`absolute right-0 mt-2 w-48 bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md shadow-lg py-1 background z-50 ${a?"block":"hidden"}`,children:[(0,d.jsx)("a",{href:"https://docs.glassflow.dev/",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:g,children:"View Docs"}),(0,d.jsx)("a",{href:"mailto:help@glassflow.dev",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:g,children:"Contact Us"}),(0,d.jsx)("a",{href:"https://github.com/glassflow/clickhouse-etl/issues",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:g,children:"Report an Issue"})]})]})};function A(){let a=(0,n.useRouter)(),b=(0,n.usePathname)(),{coreStore:c}=(0,o.useStore)(),{resetPipelineState:j}=c,[k,l]=(0,e.useState)(!1),[m,r]=(0,e.useState)(!1),[v,A]=(0,e.useState)(null),[B,C]=(0,e.useState)({left:0,width:0}),D=[{href:"/home",icon:i.A,label:"Create"},{href:"/pipelines",icon:h,label:"Pipelines"}],E="/home"===b||"/pipelines/create"===b?0:b.startsWith("/pipelines")?1:-1,F=(0,e.useRef)([]);(0,e.useCallback)(a=>{let b=F.current[a];if(b){let a=b.parentElement;if(a){let c=a.getBoundingClientRect(),d=b.getBoundingClientRect();C({left:d.left-c.left,width:d.width})}}},[]);let[G,H]=(0,e.useState)({visible:!1,message:"Leaving the create journey will discard current pipeline configuration. Are you sure you want to perform this action?",title:"Discard pipeline configuration",okButtonText:"Yes",cancelButtonText:"No",type:"info"}),I=(0,e.useRef)(null),J=()=>{"/pipelines/create"===b&&H(a=>({...a,visible:!0}))},K=async b=>{if(H(a=>({...a,visible:!1})),b===p.R.YES){j("",!0);try{let b=await (0,q.Cz)();b&&b.length>0?a.push("/pipelines"):a.push("/home")}catch(b){console.error("Error checking existing pipelines:",b),a.push("/home")}}};return(0,d.jsxs)("div",{className:"h-16 w-full max-w-[var(--main-container-width)] mx-auto",children:[(0,d.jsxs)("div",{className:"container h-full px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"flex flex-row justify-between items-center h-full",children:[(0,d.jsxs)("div",{className:"flex items-center h-full",children:[(0,d.jsx)("div",{className:"lg:hidden flex items-center",children:(0,d.jsx)(s.$,{variant:"ghost",className:"p-2",onClick:()=>l(!k),children:(0,d.jsx)(f.default,{src:k?t.A:u,alt:"Menu",width:24,height:24})})}),(0,d.jsx)("div",{className:"hidden lg:flex items-center pr-12 border-r border-r-[#3A3A3A]",children:(0,d.jsx)(s.$,{variant:"ghost",onClick:J,className:"p-0 hover:bg-transparent",children:(0,d.jsx)(f.default,{src:g,alt:"Glassflow Logo",width:140,height:30,className:"cursor-pointer w-auto h-[18px]"})})}),(0,d.jsx)("div",{className:"lg:hidden flex items-center justify-center flex-1",children:(0,d.jsx)(s.$,{variant:"ghost",onClick:J,className:"p-0 hover:bg-transparent",children:(0,d.jsx)(f.default,{src:g,alt:"Glassflow Logo",width:140,height:30,className:"cursor-pointer w-auto h-[18px]"})})}),(0,d.jsxs)("nav",{className:"hidden lg:flex flex-row h-full ml-12 relative",children:[(0,d.jsx)("ul",{className:"flex flex-row h-full",children:D.map((a,b)=>(0,d.jsx)(x,{href:a.href,icon:a.icon,label:a.label,isActive:E===b,onMouseEnter:()=>A(b),onMouseLeave:()=>A(null),navRef:a=>{F.current[b]=a}},b))}),(null!==v?v:E)>=0&&(0,d.jsx)("div",{className:"absolute bottom-0 h-0.5 bg-gradient-to-r from-orange-300/30 via-orange-400 to-orange-300/30 rounded-full transition-all duration-300 ease-in-out",style:{left:`${B.left}px`,width:`${B.width}px`}})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(w,{}),(0,d.jsx)(z,{isOpen:m,setIsOpen:r})]})]}),(0,d.jsx)("div",{ref:I,className:`lg:hidden transition-all duration-300 ease-in-out ${k?"max-h-64 opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:(0,d.jsx)("nav",{className:"py-4 bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md z-10",children:(0,d.jsxs)("ul",{className:"flex flex-col gap-4",children:[(0,d.jsx)(y,{href:"/home",icon:i.A,label:"Create",onClick:()=>l(!1)}),(0,d.jsx)(y,{href:"/pipelines",icon:h,label:"Pipelines",onClick:()=>l(!1)})]})})})]}),(0,d.jsx)(p.W,{visible:G.visible,title:G.title,description:G.message,okButtonText:G.okButtonText,cancelButtonText:G.cancelButtonText,onComplete:K})]})}},48661:(a,b,c)=>{"use strict";c.d(b,{U:()=>d,t:()=>e});let d=a=>{if(!a||""===a.trim())return"active";switch(a.charAt(0).toLowerCase()+a.slice(1)){case"running":case"active":case"deploying":case"no_configuration":default:return"active";case"paused":return"paused";case"pausing":return"pausing";case"resuming":return"resuming";case"stopped":case"terminated":case"deleted":return"stopped";case"stopping":return"stopping";case"terminating":case"deleting":return"terminating";case"failed":case"error":case"deploy_failed":case"delete_failed":return"failed"}},e=a=>{let b=!!(a?.join?.enabled===!0&&Array.isArray(a?.join?.sources)&&a.join.sources.length>0),c=Array.isArray(a?.source?.topics)?a.source.topics:[],d=c.filter(a=>{let b=a?.deduplication,c=b?.enabled===!0||b?.enabled==="true",d="string"==typeof b?.id_field?b.id_field.trim():"";return c&&d.length>0}).length,e=c.length>1&&d>=2;return b&&e?"Join & Deduplication":b?"Join":d>0?"Deduplication":"Ingest Only"}},49679:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d={src:"/_next/static/media/close.d3c78582.svg",height:800,width:800,blurWidth:0,blurHeight:0}},51112:(a,b,c)=>{"use strict";c.d(b,{HeaderWrapper:()=>d});let d=(0,c(13383).registerClientReference)(function(){throw Error("Attempted to call HeaderWrapper() from the server but HeaderWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/shared/HeaderWrapper.tsx","HeaderWrapper")},51978:(a,b,c)=>{"use strict";c.d(b,{HeaderWrapper:()=>e});var d=c(48477);function e({children:a}){return(0,d.jsx)("header",{className:"w-full shrink-0 sticky top-0 z-50 bg-[var(--color-background-elevation-base)]",style:{boxShadow:"var(--Shadow-Styles-Overlay-Layer-1-X, 0px) 1px 1px var(--Shadow-Styles-Overlay-Layer-1-Spread, 0px) #3A3A3A"},children:a})}},54137:(a,b,c)=>{"use strict";c.d(b,{PlatformProvider:()=>j,V:()=>i});var d=c(48477),e=c(48296),f=c(66740);let g=async()=>{try{let a=(0,f.e9)("platform"),b=await fetch(a);if(!b.ok)throw{code:b.status,message:"Failed to fetch platform info"};let c=await b.json();return{orchestrator:({docker:"docker",k8s:"k8s",kubernetes:"k8s",local:"local",unknown:"unknown"})[c.orchestrator]||"unknown",api_version:c.api_version}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to fetch platform info"}}},h=(0,e.createContext)(void 0),i=()=>{let a=(0,e.useContext)(h);if(void 0===a)throw Error("usePlatform must be used within a PlatformProvider");return a},j=({children:a})=>{let[b,c]=(0,e.useState)(null),[f,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),l=async()=>{try{i(!0),k(null);let a=await g();c(a)}catch(a){k(a.message||"Failed to fetch platform info"),console.error("Platform fetch error:",a)}finally{i(!1)}};return(0,e.useEffect)(()=>{l()},[]),(0,d.jsx)(h.Provider,{value:{platform:b,loading:f,error:j,refetch:l},children:a})}},54299:(a,b,c)=>{"use strict";c.d(b,{B0:()=>g,Cz:()=>f,JP:()=>k,WQ:()=>n,Xs:()=>j,ej:()=>r,gP:()=>m,j_:()=>p,lY:()=>o,pI:()=>h,pZ:()=>i,sw:()=>l});var d=c(66740),e=c(48661);let f=async()=>{try{let a=(0,d.e9)("pipeline"),b=await fetch(a),c=await b.json();if(c.success){let a=(c.pipelines||[]).map(a=>({...a,status:(0,e.U)(a.status||"")})),b=a.map(a=>a.pipeline_id),d=await q(b);return await Promise.all(a.map(async a=>{try{let b=await g(a.pipeline_id),c=(0,e.t)(b),f=d[a.pipeline_id],h=f&&f.unconsumed_messages>0?"unstable":"stable";return{...a,transformation_type:c,dlq_stats:f?{total_messages:f.total_messages,unconsumed_messages:f.unconsumed_messages,last_received_at:f.last_received_at,last_consumed_at:f.last_consumed_at}:void 0,health_status:h}}catch{return{...a,dlq_stats:void 0,health_status:"stable"}}}))}throw{code:b.status,message:c.error||"Failed to fetch pipelines"}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to fetch pipelines"}}},g=async a=>{try{let b=(0,d.e9)(`pipeline/${a}`),c=(0,d.e9)(`pipeline/${a}/health`),[f,g]=await Promise.all([fetch(b),fetch(c)]);if(f.ok){let a=await f.json();if(a?.success===!0){let b=a.pipeline,c="active";if(g.ok)try{let a=await g.json();a?.overall_status&&(c=(0,e.U)(a.overall_status))}catch(a){console.warn("Failed to parse health data:",a)}return b.status=c,b}if(a&&"object"==typeof a&&a.pipeline_id){let b="active";if(g.ok)try{let a=await g.json();a?.overall_status&&(b=(0,e.U)(a.overall_status))}catch(a){console.warn("Failed to parse health data:",a)}return a.status=b,a}throw{code:f.status,message:a?.error||"Failed to fetch pipeline"}}throw{code:f.status,message:"Failed to fetch pipeline"}}catch(b){try{let[b,c]=await Promise.all([fetch(`/ui-api/mock/pipeline/${a}`),fetch(`/ui-api/mock/pipeline/${a}/health`)]),d=await b.json();if(b.ok&&d?.success===!0){let a=d.pipeline,b="active";if(c.ok)try{let a=await c.json();a?.health?.overall_status&&(b=(0,e.U)(a.health.overall_status))}catch(a){console.warn("Failed to parse mock health data:",a)}return a.status=b,a}throw{code:b.status,message:d?.error||"Failed to fetch pipeline (mock)"}}catch(a){if(b.code)throw b;throw{code:500,message:b.message||"Failed to fetch pipeline"}}}},h=async a=>{try{let b=(0,d.e9)(`pipeline/${a}`),c=await fetch(b,{method:"GET",headers:{"Content-Type":"application/json"}});return 200===c.status}catch(a){return a.status,!1}},i=async a=>{try{let b=(0,d.e9)("pipeline"),c=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e=await c.json();if(e.success)return e.pipeline;throw{code:c.status,message:e.error||"Failed to create pipeline"}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to create pipeline"}}},j=async(a,b)=>{try{let c=(0,d.e9)(`pipeline/${a}/edit`),e=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),f=await e.json();if(f.success)return f.pipeline;{let a=f.error||"Failed to edit pipeline";if(400===e.status&&a.includes("Pipeline must be stopped"))throw{code:400,message:"Pipeline must be stopped before editing. Please pause the pipeline first.",requiresPause:!0};throw{code:e.status,message:a}}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to edit pipeline"}}},k=async a=>{try{let b=(0,d.e9)(`pipeline/${a}/stop`),c=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"}});if(!c.ok){let a=await c.text();throw{code:c.status,message:a||"Failed to stop pipeline"}}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to stop pipeline"}}},l=async a=>{try{let b=(0,d.e9)(`pipeline/${a}/terminate`),c=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"}});if(!c.ok){let a=await c.text();throw{code:c.status,message:a||"Failed to terminate pipeline"}}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to terminate pipeline"}}},m=async a=>{try{let b=(0,d.e9)(`pipeline/${a}`),c=await fetch(b,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!c.ok){let a=await c.text();throw{code:c.status,message:a||"Failed to delete pipeline"}}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to delete pipeline"}}},n=async a=>{try{let b=(0,d.e9)(`pipeline/${a}/resume`),c=await fetch(b,{method:"POST"}),e=await c.json();if(!c.ok||!e.success)throw{code:c.status,message:e.error||"Failed to resume pipeline"};return}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to resume pipeline"}}},o=async(a,b)=>{try{let c=(0,d.e9)(`pipeline/${a}`),e=await fetch(c,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b})}),f=await e.json();if(f.success)return f.pipeline;throw{code:e.status,message:f.error||"Failed to rename pipeline"}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to rename pipeline"}}},p=async a=>{try{let b=(0,d.e9)(`pipeline/${a}/dlq/state`),c=await fetch(b);if(!c.ok)throw{code:c.status,message:"Failed to fetch DLQ state"};return await c.json()}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to fetch DLQ state"}}},q=async a=>{try{let b=a.map(async a=>{try{let b=await p(a);return{pipelineId:a,dlqState:b}}catch(b){return console.warn(`Failed to fetch DLQ stats for pipeline ${a}:`,b),{pipelineId:a,dlqState:null}}}),c=await Promise.all(b),d={};return c.forEach(({pipelineId:a,dlqState:b})=>{d[a]=b}),d}catch(a){return console.error("Failed to fetch bulk DLQ stats:",a),{}}},r=async a=>{try{let b=(0,d.e9)(`pipeline/${a.pipeline_id}/clickhouse/metrics-from-config`),c=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pipeline:a})});if(!c.ok)throw{code:c.status,message:"Failed to fetch ClickHouse metrics"};let e=await c.json();if(!e.success)throw{code:500,message:e.error||"Failed to fetch ClickHouse metrics"};return e.metrics}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to fetch ClickHouse metrics"}}}},55300:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(13383).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/shared/ThemeProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/shared/ThemeProvider.tsx","default")},56834:(a,b,c)=>{"use strict";c.d(b,{$:()=>e});var d=c(66740);let e=async()=>{try{let a=(0,d.e9)("healthz"),b=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(b.ok)return{success:!0,status:"healthy",timestamp:new Date().toISOString(),message:"Backend is healthy"};{let a=`Backend health check failed with status ${b.status}`;try{a=(await b.json()).message||a}catch{a=b.statusText||a}throw{code:b.status,message:a}}}catch(a){if(a.code)throw a;throw{code:500,message:a.message||"Failed to check backend health"}}}},58283:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>q,metadata:()=>p});var d=c(81367),e=c(55300),f=c(83382),g=c.n(f),h=c(15744),i=c.n(h);c(95369);var j=c(23933),k=c(51112),l=c(90480),m=c(34518),n=c(27154),o=c(19008);let p={title:"Glassflow Create Pipeline",description:"Create a new pipeline with ready-to-use data operations"};function q({children:a}){return(0,d.jsxs)("html",{lang:"en",className:`${g().variable} ${i().variable}`,suppressHydrationWarning:!0,children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,d.jsx)("link",{rel:"shortcut icon",href:"/favicon.svg"})]}),(0,d.jsxs)("body",{className:"background text-foreground",children:[(0,d.jsx)(o.default,{src:"/env.js",strategy:"beforeInteractive"}),(0,d.jsx)(e.default,{children:(0,d.jsx)(l.AnalyticsProvider,{children:(0,d.jsx)(m.HealthCheckProvider,{children:(0,d.jsxs)(n.PlatformProvider,{children:[(0,d.jsx)(k.HeaderWrapper,{children:(0,d.jsx)(j.Header,{})}),(0,d.jsx)("main",{className:"flex flex-col items-center w-full px-4 sm:px-8 lg:px-20 py-4 sm:py-8 overflow-x-hidden overflow-y-auto",children:(0,d.jsx)("div",{className:"w-full max-w-[1240px] mx-auto px-4 sm:px-0",children:a})}),(0,d.jsx)("footer",{className:"w-full px-4 sm:px-8 lg:px-20 py-4 sm:py-6 shrink-0",children:(0,d.jsx)("div",{className:"max-w-[1240px] mx-auto w-full flex gap-6 flex-wrap items-center justify-center"})})]})})})})]})]})}},64708:(a,b,c)=>{"use strict";c.d(b,{useStore:()=>D});var d=c(69913),e=c(25132);let f={availableTopics:["transactions","credit_card_1_transactions","__consumer_offsets"],topicCount:1,topics:{0:{index:0,name:"credit_card_1_transactions",initialOffset:"latest",replicas:3,partitionCount:3,events:[{event:{booking_date:"1970-01-01",value_date:"1970-01-01",transaction_type:"Debit",description:"Commerzbank AG COMMERZBANK AG 5232249017093073 ABR ECHNUNG KREDITKARTE VOM 27.02.25 End-To-End Reference: 9440-8463529828357631-RD-2502272000 Mandate Reference: 100INH0002104832 ID Of Ordering Party: DE3810000000020140 SEPA-CORE-DIRECT DEBIT subsequent",amount:-507,currency:"EUR",iban:"DE47100400000156459000",category:"Banking & Loans",_metadata:{topic:"credit_card_1_transactions",partition:0,offset:"0",timestamp:"1743086033817"},key:"1"},topicIndex:0}],selectedEvent:{event:{booking_date:"1970-01-01",value_date:"1970-01-01",transaction_type:"Debit",description:"Commerzbank AG COMMERZBANK AG 5232249017093073 ABR ECHNUNG KREDITKARTE VOM 27.02.25 End-To-End Reference: 9440-8463529828357631-RD-2502272000 Mandate Reference: 100INH0002104832 ID Of Ordering Party: DE3810000000020140 SEPA-CORE-DIRECT DEBIT subsequent",amount:-507,currency:"EUR",iban:"DE47100400000156459000",category:"Banking & Loans",_metadata:{topic:"credit_card_1_transactions",partition:0,offset:"0",timestamp:"1743086033817"},key:"1"},topicIndex:0}}},updateTopic:()=>{},invalidateTopicDependentState:()=>{},resetTopicsStore:()=>{},markAsValid:()=>{},markAsInvalidated:()=>{},getTopic:a=>f.topics[a.toString()],getEvent:()=>null,validation:{isValid:!0,isInvalidated:!1}},g={deduplicationConfigs:{0:{enabled:!0,window:5,unit:"minutes",key:"booking_date",keyType:"string"}},updateDeduplication:()=>{},invalidateDeduplication:()=>{},getDeduplication:a=>g.deduplicationConfigs[a.toString()],validation:{isValid:!0,isInvalidated:!1}},h={activeStep:"review-configuration",completedSteps:["kafka-connection","topic-selection","deduplication-configurator","clickhouse-connection","clickhouse-mapper"],editingStep:""},i={kafkaStore:{authMethod:"SASL/PLAIN",securityProtocol:"SASL_PLAINTEXT",bootstrapServers:"localhost:9092, localhost:9093, localhost:9094",isConnected:!0,skipAuth:!1,saslPlain:{username:"admin",password:"admin-secret",consumerGroup:"default"},saslJaas:{jaasConfig:""},saslGssapi:{kerberosPrincipal:"",kerberosKeytab:""},saslOauthbearer:{oauthBearerToken:""},saslScram256:{username:"",password:"",consumerGroup:""},saslScram512:{username:"",password:"",consumerGroup:""},noAuth:{consumerGroup:""},awsIam:{awsAccessKey:"",awsAccessKeySecret:"",awsRegion:"",awsIAMRoleArn:""},delegationTokens:{delegationToken:""},ldap:{ldapServerUrl:"",ldapServerPort:"",ldapBaseDn:"",ldapBindDn:"",ldapBindPassword:"",ldapUserSearchFilter:""},mtls:{clientCert:"",clientKey:"",password:""},setKafkaAuthMethod:()=>{},setKafkaSecurityProtocol:()=>{},setKafkaBootstrapServers:()=>{},setKafkaNoAuth:()=>{},setKafkaSaslPlain:()=>{},setKafkaSaslJaas:()=>{},setKafkaSaslGssapi:()=>{},setKafkaSaslOauthbearer:()=>{},setKafkaSaslScram256:()=>{},setKafkaSaslScram512:()=>{},setKafkaAwsIam:()=>{},setKafkaDelegationTokens:()=>{},setKafkaLdap:()=>{},setKafkaMtls:()=>{},setKafkaConnection:()=>{},setKafkaSkipAuth:()=>{},setIsConnected:()=>{},getIsKafkaConnectionDirty:()=>!1,resetKafkaStore:()=>{}},clickhouseConnectionStore:{clickhouseConnection:{connectionType:"direct",directConnection:{host:"https://t6nh3rt60e.eu-central-1.aws.clickhouse.cloud",httpPort:"8443",username:"default",password:"SYEq_Q2KGWO.u",nativePort:"",useSSL:!1,skipCertificateVerification:!1},connectionStatus:"success",connectionError:null},clickhouseMetadata:null,setClickhouseConnection:()=>{},getIsClickhouseConnectionDirty:()=>!1,updateDatabases:()=>{},updateTables:()=>{},updateTableSchema:()=>{},clearData:()=>{},getDatabases:()=>[],getTables:()=>[],getTableSchema:()=>[],getConnectionId:()=>null},clickhouseDestinationStore:{clickhouseDestination:{scheme:"",database:"default",table:"DE47100400000156459000_EUR_10_03_2025_1143",destinationColumns:[{name:"Bookind date",type:"Date",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Value date",type:"Date",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Transaction type",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Booking text",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Amount",type:"Float32",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Currency",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Account IBAN",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""},{name:"Category",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:""}],mapping:[{name:"Bookind date",type:"Date",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"booking_date"},{name:"Value date",type:"Date",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"transaction_type"},{name:"Transaction type",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"value_date"},{name:"Booking text",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"number",isNullable:!1,isKey:!1,eventField:"amount"},{name:"Amount",type:"Float32",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"description"},{name:"Currency",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"_metadata.offset"},{name:"Account IBAN",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"_metadata.offset"},{name:"Category",type:"String",default_type:"",default_expression:"",comment:"",codec_expression:"",ttl_expression:"",jsonType:"string",isNullable:!1,isKey:!1,eventField:"_metadata.timestamp"}],maxBatchSize:1e3,maxDelayTime:1,maxDelayTimeUnit:"m"},setClickhouseDestination:()=>{},resetDestinationState:()=>{},getIsDestinationMappingDirty:()=>!1},topicsStore:f,deduplicationStore:g,coreStore:{pipelineId:"",pipelineName:"",operationsSelected:{operation:"deduplication"},outboundEventPreview:{events:{}},analyticsConsent:!1,consentAnswered:!1,isDirty:!1,apiConfig:{},setPipelineId:()=>{},setPipelineName:()=>{},setOperationsSelected:()=>{},setOutboundEventPreview:()=>{},setAnalyticsConsent:()=>{},setConsentAnswered:()=>{},markAsDirty:()=>{},markAsClean:()=>{},setApiConfig:()=>{},resetPipelineState:()=>{}},joinStore:{enabled:!1,type:"temporal",streams:[],setEnabled:()=>{},setType:()=>{},setStreams:()=>{},getIsJoinDirty:()=>!1,resetJoinStore:()=>{}},stepsStore:{activeStep:h.activeStep,completedSteps:h.completedSteps,editingStep:h.editingStep,setActiveStep:()=>{},setCompletedSteps:()=>{},addCompletedStep:()=>{},removeCompletedStepsAfter:()=>{},setEditingStep:()=>{},resetStepsStore:()=>{}}},j=()=>({status:"not-configured"}),k=()=>({status:"valid",lastModified:new Date}),l=a=>({status:"invalidated",invalidatedBy:a,lastModified:new Date}),m={skipAuth:!1,authMethod:"",securityProtocol:"",bootstrapServers:"",noAuth:{truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""}},saslPlain:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},isConnected:!1,validation:j(),saslJaas:{jaasConfig:""},saslGssapi:{kerberosPrincipal:"",kerberosKeytab:"",kerberosKeytabFileName:"",serviceName:"",kerberosRealm:"",kdc:"",krb5Config:"",krb5ConfigFileName:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""}},saslOauthbearer:{oauthBearerToken:""},saslScram256:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},saslScram512:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},awsIam:{awsRegion:"",awsIAMRoleArn:"",awsAccessKey:"",awsAccessKeySecret:""},delegationTokens:{delegationToken:""},ldap:{ldapServerUrl:"",ldapServerPort:"",ldapBindDn:"",ldapBindPassword:"",ldapUserSearchFilter:"",ldapBaseDn:""},mtls:{clientCert:"",clientKey:"",password:""}},n={clickhouseConnection:{connectionType:"direct",directConnection:{host:"",httpPort:"",username:"",password:"",nativePort:"",useSSL:!0,skipCertificateVerification:!1},connectionStatus:"idle",connectionError:null},clickhouseMetadata:null,validation:j()},o={clickhouseDestination:{scheme:"",database:"",table:"",mapping:[],destinationColumns:[],maxBatchSize:1e3,maxDelayTime:1,maxDelayTimeUnit:"m"},validation:j()},p={activeStep:"",completedSteps:[],editingStep:""},q={enabled:!1,type:"temporal",streams:[],validation:j()};var r=c(48165),s=c(1442);function t(a){if(a?.source?.connection_params){let b=function(a){let b=!!a.skip_auth,c=(a.mechanism||"").toString().toUpperCase();return{authMethod:b?"NO_AUTH":"PLAIN"===c?"SASL/PLAIN":"SCRAM-SHA-256"===c?"SASL/SCRAM-256":"SCRAM-SHA-512"===c?"SASL/SCRAM-512":"OAUTHBEARER"===c?"SASL/OAUTHBEARER":"GSSAPI"===c?"SASL/GSSAPI":"JAAS"===c?"SASL/JAAS":"LDAP"===c?"SASL/LDAP":"MTLS"===c?"mTLS":"",securityProtocol:a.protocol||"",bootstrapServers:(a.brokers||[]).join(", "),skipAuth:b,saslPlain:{username:a.username||"",password:a.password||"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:a.root_ca?atob(a.root_ca):""},consumerGroup:a.consumer_group||""},saslScram256:{username:a.username||"",password:a.password||"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:a.root_ca?atob(a.root_ca):""},consumerGroup:a.consumer_group||""},saslScram512:{username:a.username||"",password:a.password||"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:a.root_ca?atob(a.root_ca):""}},saslJaas:{jaasConfig:a.jaas_config||""},saslGssapi:{kerberosPrincipal:a.kerberos_principal||"",kerberosKeytab:a.kerberos_keytab||"",serviceName:a.service_name||"",kerberosRealm:a.kerberos_realm||"",kdc:a.kdc||"",krb5Config:a.krb5_config||"",useTicketCache:a.use_ticket_cache||!1,ticketCachePath:a.ticket_cache_path||"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:a.root_ca?atob(a.root_ca):""}},saslOauthbearer:{oauthBearerToken:a.oauth_bearer_token||""},awsIam:{awsRegion:a.aws_region||"",awsIAMRoleArn:a.aws_iam_role_arn||"",awsAccessKey:a.aws_access_key||"",awsAccessKeySecret:a.aws_access_key_secret||""},delegationTokens:{delegationToken:a.delegation_token||""},ldap:{ldapServerUrl:a.ldap_server_url||"",ldapServerPort:a.ldap_server_port||"",ldapBindDn:a.ldap_bind_dn||"",ldapBindPassword:a.ldap_bind_password||"",ldapUserSearchFilter:a.ldap_user_search_filter||"",ldapBaseDn:a.ldap_base_dn||""},mtls:{clientCert:a.client_cert||"",clientKey:a.client_key||"",password:a.password||""},noAuth:{truststore:{location:"",password:"",type:"",algorithm:"",certificates:a.root_ca?atob(a.root_ca):""}}}}(a.source.connection_params);D.getState().kafkaStore.setKafkaConnection(b)}}function u(a){let b=[];return a.bootstrapServers&&""!==a.bootstrapServers.trim()||b.push("bootstrapServers"),a.securityProtocol&&""!==a.securityProtocol.trim()||b.push("securityProtocol"),a.authMethod&&""!==a.authMethod.trim()||b.push("authMethod"),"SASL/PLAIN"===a.authMethod?(a.saslPlain.username&&""!==a.saslPlain.username.trim()||b.push("saslPlain.username"),a.saslPlain.password&&""!==a.saslPlain.password.trim()||b.push("saslPlain.password")):"SASL/SCRAM-256"===a.authMethod?(a.saslScram256.username&&""!==a.saslScram256.username.trim()||b.push("saslScram256.username"),a.saslScram256.password&&""!==a.saslScram256.password.trim()||b.push("saslScram256.password")):"SASL/SCRAM-512"===a.authMethod&&(a.saslScram512.username&&""!==a.saslScram512.username.trim()||b.push("saslScram512.username"),a.saslScram512.password&&""!==a.saslScram512.password.trim()||b.push("saslScram512.password")),{isValid:0===b.length,missingFields:b}}async function v(a=5,b=100){for(let c=0;c<a;c++){let d=u(D.getState().kafkaStore);if(d.isValid)return void console.log("‚úÖ Kafka store properly hydrated, proceeding with topics fetch");console.log(`‚è≥ Kafka store not ready (attempt ${c+1}/${a}), missing: ${d.missingFields.join(", ")}`),c<a-1&&await new Promise(a=>setTimeout(a,b))}let c=u(D.getState().kafkaStore);throw Error(`Kafka store hydration timeout. Missing fields: ${c.missingFields.join(", ")}`)}async function w(a){try{await v();let b=D.getState().kafkaStore,c={servers:b.bootstrapServers,securityProtocol:b.securityProtocol,authMethod:b.authMethod};switch(b.authMethod){case"SASL/PLAIN":c.username=b.saslPlain.username,c.password=b.saslPlain.password,c.consumerGroup=b.saslPlain.consumerGroup,b.saslPlain?.truststore?.certificates&&(c.certificate=b.saslPlain.truststore.certificates);break;case"SASL/SCRAM-256":c.username=b.saslScram256.username,c.password=b.saslScram256.password,c.consumerGroup=b.saslScram256.consumerGroup,b.saslScram256?.truststore?.certificates&&(c.certificate=b.saslScram256.truststore.certificates);break;case"SASL/SCRAM-512":c.username=b.saslScram512.username,c.password=b.saslScram512.password,b.saslScram512?.truststore?.certificates&&(c.certificate=b.saslScram512.truststore.certificates);break;case"SASL/GSSAPI":b.saslGssapi?.truststore?.certificates&&(c.certificate=b.saslGssapi.truststore.certificates);break;case"NO_AUTH":b.noAuth?.truststore?.certificates&&(c.certificate=b.noAuth.truststore.certificates)}let[d,e]=await Promise.all([fetch("/ui-api/kafka/topics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),fetch("/ui-api/kafka/topic-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})]),f=await d.json();if(!f.success)throw Error(f.error||"Failed to fetch topics");let g=await e.json();if(!g.success)throw Error(g.error||"Failed to fetch topic details");D.getState().topicsStore.setAvailableTopics(f.topics),a?.source?.topics&&(a.source.topics.forEach((a,b)=>{let c=g.topicDetails?.find(b=>b.name===a.name),d=c?.partitionCount||1,e=D.getState().topicsStore.getTopic(b),f=e?.selectedEvent?.event,h=e?.replicas,i=function(a,b){let c=a.consumer_group_initial_offset||"latest";return{index:b,name:a.name,initialOffset:c,events:[],selectedEvent:{topicIndex:b,position:c,event:void 0},replicas:a.replicas||1,partitionCount:a.partition_count||1}}(a,b);i.partitionCount=d,f&&(i.selectedEvent.event=f,console.log(`[Hydration] Preserving existing event data for topic "${a.name}"`)),h&&h!==i.replicas&&(i.replicas=h,console.log(`[Hydration] Preserving user-modified replica count (${h}) for topic "${a.name}"`)),D.getState().topicsStore.updateTopic(i);let j=D.getState().deduplicationStore.getDeduplication(b);if(j&&j.key)console.log(`[Hydration] Preserving existing deduplication config for topic "${a.name}"`);else{let c=function(a,b){if(!a.deduplication)return{enabled:!1,window:0,unit:"hours",key:"",keyType:"string"};let c=a.deduplication.time_window||"1h",d=1,e="hours",f=c.match(/^(\d+d)?(\d+h)?(\d+m)?(\d+s)?$/);if(f){let a=parseInt(f[1]?.replace("d","")||"0")||0,b=parseInt(f[2]?.replace("h","")||"0")||0,c=parseInt(f[3]?.replace("m","")||"0")||0,g=86400*a+3600*b+60*c+(parseInt(f[4]?.replace("s","")||"0")||0);g>=86400?(d=Math.round(g/86400),e="days"):g>=3600?(d=Math.round(g/3600),e="hours"):g>=60?(d=Math.round(g/60),e="minutes"):(d=g,e="seconds")}else{let a=c.match(/^(\d+)([smhd])$/);if(a)switch(d=parseInt(a[1])||1,a[2]){case"s":e="seconds";break;case"m":e="minutes";break;case"h":default:e="hours";break;case"d":e="days"}}return{enabled:a.deduplication.enabled,key:a.deduplication.id_field,keyType:a.deduplication.id_field_type,window:d,unit:e}}(a,0);D.getState().deduplicationStore.updateDeduplication(b,c),console.log(`[Hydration] Setting initial deduplication config for topic "${a.name}"`)}}),console.log("[Hydration] Checking which topics need event data..."),await Promise.all(a.source.topics.map(async(a,b)=>{try{let d=D.getState().topicsStore.getTopic(b);if(d?.selectedEvent?.event)return void console.log(`[Hydration] ‚è≠Ô∏è  Skipping event fetch for topic "${a.name}" (already has event data)`);console.log(`[Hydration] üì• Fetching event for topic "${a.name}"...`);let e=await fetch("/ui-api/kafka/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,topicName:a.name,offset:a.consumer_group_initial_offset||"latest",partition:0,format:"JSON"})}),f=await e.json();if(f.success&&f.event){let c=D.getState().topicsStore.getTopic(b);c&&(D.getState().topicsStore.updateTopic({...c,selectedEvent:{topicIndex:b,position:a.consumer_group_initial_offset||"latest",event:f.event}}),console.log(`[Hydration] ‚úÖ Fetched event for topic "${a.name}"`))}else console.warn(`[Hydration] ‚ö†Ô∏è Could not fetch event for topic "${a.name}":`,f.error)}catch(b){console.error(`[Hydration] ‚ùå Failed to fetch event for topic "${a.name}":`,b)}})))}catch(a){throw console.error("‚ùå Failed to hydrate Kafka topics:",a),a}}function x(a){if(a?.sink){let b=function(a){let b=a.password||"";try{if(a.password&&"string"==typeof a.password){let c=atob(a.password);c&&!/[\x00-\x1F\x7F]/.test(c)?b=c:console.log("hydrateClickhouseConnection - password appears to be already decoded or contains control characters")}}catch(c){b=a.password||""}return{connectionType:"direct",directConnection:{host:a.host||"",httpPort:a.http_port||"",username:a.username||"",password:b,nativePort:a.port||"",useSSL:a.secure??!0,skipCertificateVerification:a.skip_certificate_verification||!1},connectionStatus:"idle",connectionError:null}}(a.sink);D.getState().clickhouseConnectionStore.setClickhouseConnection(b)}}async function y(a){let b=a?.sink;if(!b)return;let d=b.password||"";try{if(b.password&&"string"==typeof b.password){let a=atob(b.password);a&&!/[\x00-\x1F\x7F]/.test(a)?d=a:console.log("hydrateClickhouseDestination - password appears to be already decoded or contains control characters")}}catch(a){d=b.password||""}let e=function(a){let b=1,c="m";if(a.max_delay_time)if("string"==typeof a.max_delay_time){let d=a.max_delay_time.match(/(?:(\d+)d)?(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?/);if(d){let a=parseInt(d[1]||"0"),e=parseInt(d[2]||"0"),f=86400*a+3600*e+60*parseInt(d[3]||"0")+parseInt(d[4]||"0");f>=86400&&f%86400==0?(b=Math.round(f/86400),c="d"):f>=3600&&f%3600==0||f>=3600?(b=Math.round(f/3600),c="h"):f>=60?(b=Math.round(f/60),c="m"):(b=f,c="s")}}else"number"==typeof a.max_delay_time&&(b=a.max_delay_time,c="m");return{scheme:"",database:a.database||"",table:a.table||"",mapping:a.table_mapping||[],destinationColumns:[],maxBatchSize:a.max_batch_size||1e3,maxDelayTime:b,maxDelayTimeUnit:c}}(b);D.getState().clickhouseDestinationStore.setClickhouseDestination(e),console.log("[Hydration] Fetching ClickHouse databases...");let f=await fetch("/ui-api/clickhouse/databases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:b.host,httpPort:Number(b.http_port),nativePort:Number(b.port),username:b.username,password:d,useSSL:b.secure,skipCertificateVerification:b.skip_certificate_verification})}),g=await f.json();if(!g.success){console.error("[Hydration] Failed to fetch databases:",g.error),console.warn("[Hydration] Continuing with basic destination setup (databases unavailable)");return}console.log("[Hydration] Databases fetched successfully:",g.databases?.length),console.log("[Hydration] Fetching tables for database:",b.database);let h=await fetch("/ui-api/clickhouse/tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:b.host,httpPort:Number(b.http_port),nativePort:Number(b.port),username:b.username,password:d,useSSL:b.secure,skipCertificateVerification:b.skip_certificate_verification,database:b.database})}),i=await h.json();if(!i.success){console.error("[Hydration] Failed to fetch tables:",i.error),console.warn("[Hydration] Continuing with basic destination setup (tables unavailable)");return}console.log("[Hydration] Tables fetched successfully:",i.tables?.length),console.log("[Hydration] Fetching schema for table:",b.database,b.table);let j=await fetch("/ui-api/clickhouse/schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:b.host,httpPort:Number(b.http_port),nativePort:Number(b.port),username:b.username,password:d,useSSL:b.secure,skipCertificateVerification:b.skip_certificate_verification,database:b.database,table:b.table})}),k=await j.json();if(!k.success){console.error("[Hydration] Failed to fetch schema:",k.error),console.warn("[Hydration] Continuing with basic destination setup (schema unavailable)");return}console.log("[Hydration] Schema fetched successfully:",k.columns?.length);let l=k.columns||[],{filterUserMappableColumns:m}=await c.e(4673).then(c.bind(c,4673)),n=m(l),o=Array.isArray(b.table_mapping)?b.table_mapping:[],p=n.map(a=>{let b=o.find(b=>(b.column_name||b.name)===a.name),c=a.type||a.column_type||"",d=function(a){let b=(a||"").toLowerCase();if(!b)return"";let c=b.replace(/nullable\((.*)\)/,"$1").replace(/lowcardinality\((.*)\)/,"$1");return c.startsWith("string")||c.startsWith("fixedstring")||c.includes("uuid")?"string":c.startsWith("bool")||"boolean"===c?"bool":c.startsWith("u")?"uint":c.startsWith("int")?"int":c.startsWith("float")||c.startsWith("decimal")?"float":c.startsWith("date")||c.startsWith("datetime")?"string":c.startsWith("array")?"array":c.startsWith("map")?"bytes":"string"}(c);return{name:a.name,type:c,isNullable:!0===a.isNullable||(a.type||a.column_type||"").includes("Nullable"),jsonType:b?.jsonType||d,eventField:b?.field_name||b?.eventField||"",...b?.source_id?{sourceTopic:b.source_id}:{}}});D.getState().clickhouseDestinationStore.setClickhouseDestination({...e,destinationColumns:n.map(a=>({name:a.name,type:a.type||a.column_type||"",isNullable:!0===a.isNullable||(a.type||a.column_type||"").includes("Nullable"),default_type:a.default_type||"",default_expression:a.default_expression||"",default_kind:a.default_kind||""})),mapping:p})}function z(a){let b=a?.join;if(b)if(D.getState().joinStore.setEnabled(!!b.enabled),D.getState().joinStore.setType(b.type||"temporal"),b.sources){let a=(b.sources||[]).map(a=>{let{value:b,unit:c}=function(a){let b=a||"1h",c=1,d="hours",e=b.match(/^(\d+d)?(\d+h)?(\d+m)?(\d+s)?$/);if(e){let a=parseInt(e[1]?.replace("d","")||"0")||0,b=parseInt(e[2]?.replace("h","")||"0")||0,f=86400*a+3600*b+60*(parseInt(e[3]?.replace("m","")||"0")||0)+(parseInt(e[4]?.replace("s","")||"0")||0);f>=86400?(c=Math.round(f/86400),d="days"):f>=3600?(c=Math.round(f/3600),d="hours"):f>=60?(c=Math.round(f/60),d="minutes"):(c=f,d="seconds")}else{let a=b.match(/^(\d+)([smhd])$/);if(a)switch(c=parseInt(a[1])||1,a[2]){case"s":d="seconds";break;case"m":d="minutes";break;case"h":default:d="hours";break;case"d":d="days"}}return{value:c,unit:d}}(a.time_window);return{streamId:a.source_id,topicName:a.source_id,joinKey:a.join_key,joinTimeWindowValue:b,joinTimeWindowUnit:c,orientation:a.orientation}});D.getState().joinStore.setStreams(a)}else D.getState().joinStore.setStreams([])}let A=a=>{let b=a?.source?.topics||[],c=a?.join?.enabled||!1,d=a=>{let b=a?.deduplication,c=b?.enabled===!0,d="string"==typeof b?.id_field&&""!==b.id_field.trim();return c&&d};if(1===b.length&&!c)return d(b[0])?"deduplication":"ingest-only";if(b.length>1&&c){let a=d(b[0]),c=d(b[1]);return a&&c?"deduplication-joining":"joining"}return"ingest-only"},B={pipelineId:"",pipelineName:"",operationsSelected:{operation:""},outboundEventPreview:{events:[]},analyticsConsent:!1,consentAnswered:!1,isDirty:!1,apiConfig:{},mode:"create",baseConfig:void 0,lastSavedConfig:void 0,saveHistory:[]},C=(0,d.v)()((0,e.lt)((a,b,d)=>({...((a,b)=>({kafkaStore:{authMethod:"",securityProtocol:"",bootstrapServers:"",skipAuth:!1,isConnected:!1,validation:j(),noAuth:{truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""}},saslPlain:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},saslJaas:{jaasConfig:""},saslGssapi:{kerberosPrincipal:"",kerberosKeytab:"",kerberosKeytabFileName:"",serviceName:"",kerberosRealm:"",kdc:"",krb5Config:"",krb5ConfigFileName:"",useTicketCache:!1,ticketCachePath:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""}},saslOauthbearer:{oauthBearerToken:""},saslScram256:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},saslScram512:{username:"",password:"",truststore:{location:"",password:"",type:"",algorithm:"",certificates:"",certificatesFileName:""},consumerGroup:""},awsIam:{awsRegion:"",awsIAMRoleArn:"",awsAccessKey:"",awsAccessKeySecret:""},delegationTokens:{delegationToken:""},ldap:{ldapServerUrl:"",ldapServerPort:"",ldapBindDn:"",ldapBindPassword:"",ldapUserSearchFilter:"",ldapBaseDn:""},mtls:{clientCert:"",clientKey:"",password:""},setKafkaAuthMethod:b=>a(a=>({kafkaStore:{...a.kafkaStore,authMethod:b}})),setKafkaSkipAuth:b=>a(a=>({kafkaStore:{...a.kafkaStore,skipAuth:b}})),setKafkaSecurityProtocol:b=>a(a=>({kafkaStore:{...a.kafkaStore,securityProtocol:b}})),setKafkaBootstrapServers:b=>a(a=>({kafkaStore:{...a.kafkaStore,bootstrapServers:b}})),setKafkaNoAuth:b=>a(a=>({kafkaStore:{...a.kafkaStore,noAuth:b}})),setKafkaSaslPlain:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslPlain:b}})),setKafkaSaslJaas:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslJaas:b}})),setKafkaSaslGssapi:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslGssapi:b}})),setKafkaSaslOauthbearer:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslOauthbearer:b}})),setKafkaSaslScram256:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslScram256:b}})),setKafkaSaslScram512:b=>a(a=>({kafkaStore:{...a.kafkaStore,saslScram512:b}})),setKafkaAwsIam:b=>a(a=>({kafkaStore:{...a.kafkaStore,awsIam:b}})),setKafkaDelegationTokens:b=>a(a=>({kafkaStore:{...a.kafkaStore,delegationTokens:b}})),setKafkaLdap:b=>a(a=>({kafkaStore:{...a.kafkaStore,ldap:b}})),setKafkaMtls:b=>a(a=>({kafkaStore:{...a.kafkaStore,mtls:b}})),setKafkaConnection:b=>a(a=>({kafkaStore:{...a.kafkaStore,...b,validation:k()}})),setIsConnected:b=>a(a=>({kafkaStore:{...a.kafkaStore,isConnected:b}})),getIsKafkaConnectionDirty:()=>{let{authMethod:a,securityProtocol:c,bootstrapServers:d,saslPlain:e,saslJaas:f,saslGssapi:g,saslOauthbearer:h,saslScram256:i,saslScram512:j,awsIam:k,delegationTokens:l,ldap:m,mtls:n}=b().kafkaStore;return Object.entries({authMethod:a,securityProtocol:c,bootstrapServers:d}).filter(([a,b])=>""!==b),Object.values({authMethod:a,securityProtocol:c,bootstrapServers:d}).some(a=>""!==a)},resetKafkaStore:()=>a(a=>({kafkaStore:{...a.kafkaStore,...m}})),markAsValid:()=>a(a=>({kafkaStore:{...a.kafkaStore,validation:k()}})),markAsInvalidated:b=>a(a=>({kafkaStore:{...a.kafkaStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({kafkaStore:{...a.kafkaStore,validation:j()}})),resetValidation:()=>a(a=>({kafkaStore:{...a.kafkaStore,validation:j()}}))}}))(a,b,d),...((a,b)=>({clickhouseConnectionStore:{clickhouseConnection:{connectionType:"direct",directConnection:{host:"",httpPort:"",username:"",password:"",nativePort:"",useSSL:!0,skipCertificateVerification:!1},connectionStatus:"idle",connectionError:null},clickhouseMetadata:null,validation:j(),setClickhouseConnection:b=>a(a=>{let c=a.clickhouseConnectionStore.clickhouseConnection;return c.directConnection.host!==b.directConnection.host||c.directConnection.httpPort!==b.directConnection.httpPort||c.directConnection.username!==b.directConnection.username||c.directConnection.password!==b.directConnection.password?{clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseConnection:b,clickhouseMetadata:null,validation:"success"===b.connectionStatus?k():a.clickhouseConnectionStore.validation}}:{clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseConnection:b,validation:"success"===b.connectionStatus?k():a.clickhouseConnectionStore.validation}}}),getIsClickhouseConnectionDirty:()=>{let{directConnection:a,connectionStatus:c,connectionError:d}=b().clickhouseConnectionStore.clickhouseConnection;return Object.values(a).some(a=>""!==a)||"idle"!==c||null!==d},updateDatabases:(b,c)=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseMetadata:{lastFetched:Date.now(),connectionId:c,databases:b,tables:a.clickhouseConnectionStore.clickhouseMetadata?.tables||{},tableSchemas:a.clickhouseConnectionStore.clickhouseMetadata?.tableSchemas||{}}}})),updateTables:(b,c,d)=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseMetadata:{lastFetched:Date.now(),connectionId:d,databases:a.clickhouseConnectionStore.clickhouseMetadata?.databases||[],tables:{...a.clickhouseConnectionStore.clickhouseMetadata?.tables,[b]:c},tableSchemas:a.clickhouseConnectionStore.clickhouseMetadata?.tableSchemas||{}}}})),updateTableSchema:(b,c,d,e)=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseMetadata:{lastFetched:Date.now(),connectionId:e,databases:a.clickhouseConnectionStore.clickhouseMetadata?.databases||[],tables:a.clickhouseConnectionStore.clickhouseMetadata?.tables||{},tableSchemas:{...a.clickhouseConnectionStore.clickhouseMetadata?.tableSchemas,[`${b}:${c}`]:d}}}})),clearMetadata:()=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,clickhouseMetadata:null}})),getDatabases:()=>b().clickhouseConnectionStore.clickhouseMetadata?.databases||[],getTables:a=>b().clickhouseConnectionStore.clickhouseMetadata?.tables?.[a]||[],getTableSchema:(a,c)=>b().clickhouseConnectionStore.clickhouseMetadata?.tableSchemas?.[`${a}:${c}`]||[],getConnectionId:()=>b().clickhouseConnectionStore.clickhouseMetadata?.connectionId||null,resetClickhouseStore:()=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,...n}})),markAsValid:()=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,validation:k()}})),markAsInvalidated:b=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,validation:j()}})),resetValidation:()=>a(a=>({clickhouseConnectionStore:{...a.clickhouseConnectionStore,validation:j()}}))}}))(a,b,d),...((a,b)=>({clickhouseDestinationStore:{clickhouseDestination:{scheme:"",database:"",table:"",destinationColumns:[],mapping:[],maxBatchSize:1e3,maxDelayTime:1,maxDelayTimeUnit:"m",useSSL:!0},validation:j(),resetDestinationState:()=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,clickhouseDestination:{scheme:"",database:"",table:"",destinationColumns:[],mapping:[],maxBatchSize:1e3,maxDelayTime:1,maxDelayTimeUnit:"m"}}})),setClickhouseDestination:b=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,clickhouseDestination:b,validation:k()}})),getIsDestinationMappingDirty:()=>{let{mapping:a}=b().clickhouseDestinationStore.clickhouseDestination;return a.some(a=>""!==a)},resetDestinationStore:()=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,...o}})),markAsValid:()=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,validation:k()}})),markAsInvalidated:b=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,validation:j()}})),resetValidation:()=>a(a=>({clickhouseDestinationStore:{...a.clickhouseDestinationStore,validation:j()}}))}}))(a,b,d),...(a=>({stepsStore:{...p,setActiveStep:b=>a(a=>({stepsStore:{...a.stepsStore,activeStep:b}})),setCompletedSteps:b=>{a(a=>({stepsStore:{...a.stepsStore,completedSteps:b}}))},addCompletedStep:b=>{a(a=>a.stepsStore.completedSteps.includes(b)?a:{stepsStore:{...a.stepsStore,completedSteps:[...a.stepsStore.completedSteps,b]}})},removeCompletedStepsAfter:b=>{a(a=>{let c=a.stepsStore.completedSteps.indexOf(b);return -1!==c?{stepsStore:{...a.stepsStore,completedSteps:a.stepsStore.completedSteps.slice(0,c+1)}}:a})},setEditingStep:b=>a(a=>({stepsStore:{...a.stepsStore,editingStep:b}})),resetStepsStore:()=>a(a=>({stepsStore:{...a.stepsStore,...p}}))}}))(a,b,d),...((a,b)=>({topicsStore:{availableTopics:[],topicCount:0,topics:{},validation:j(),setAvailableTopics:b=>a(a=>({topicsStore:{...a.topicsStore,availableTopics:b}})),setTopicCount:b=>a(a=>({topicsStore:{...a.topicsStore,topicCount:b}})),updateTopic:b=>a(a=>({topicsStore:{...a.topicsStore,topics:{...a.topicsStore.topics,[b.index]:b},validation:k()}})),getTopic:a=>b().topicsStore.topics[a],getEvent:(a,c)=>b().topicsStore.topics[a]?.events?.[c],invalidateTopicDependentState:c=>{let d=b().topicsStore.topics[c];if(!d)return;let e=b();e.joinStore&&(e.joinStore.setEnabled(!1),e.joinStore.setType(""),e.joinStore.setStreams([])),e.deduplicationStore&&e.deduplicationStore.invalidateDeduplication(c),a(a=>{let b={name:d.name,index:d.index,initialOffset:d.initialOffset,events:[],selectedEvent:{topicIndex:c,position:d.initialOffset,event:null}};return{topicsStore:{...a.topicsStore,topics:{...a.topicsStore.topics,[c]:b}}}})},resetTopicsStore:()=>{a(a=>({topicsStore:{...a.topicsStore,topics:{},availableTopics:[],topicCount:0,validation:j()}}))},markAsValid:()=>a(a=>({topicsStore:{...a.topicsStore,validation:k()}})),markAsInvalidated:b=>a(a=>({topicsStore:{...a.topicsStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({topicsStore:{...a.topicsStore,validation:j()}})),resetValidation:()=>a(a=>({topicsStore:{...a.topicsStore,validation:j()}}))}}))(a,b,d),...((a,b)=>({deduplicationStore:{deduplicationConfigs:{},validation:j(),updateDeduplication:(b,c)=>a(a=>({deduplicationStore:{...a.deduplicationStore,deduplicationConfigs:{...a.deduplicationStore.deduplicationConfigs,[b]:c},validation:k()}})),getDeduplication:a=>b().deduplicationStore.deduplicationConfigs[a],invalidateDeduplication:b=>a(a=>({deduplicationStore:{...a.deduplicationStore,deduplicationConfigs:{...a.deduplicationStore.deduplicationConfigs,[b]:{enabled:!0,window:1,unit:"minutes",key:"",keyType:""}},validation:l("topic-changed")}})),resetDeduplicationStore:()=>a(a=>({deduplicationStore:{...a.deduplicationStore,deduplicationConfigs:{},validation:j()}})),markAsValid:()=>a(a=>({deduplicationStore:{...a.deduplicationStore,validation:k()}})),markAsInvalidated:b=>a(a=>({deduplicationStore:{...a.deduplicationStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({deduplicationStore:{...a.deduplicationStore,validation:j()}})),resetValidation:()=>a(a=>({deduplicationStore:{...a.deduplicationStore,validation:j()}}))}}))(a,b,d),...((a,b)=>({joinStore:{enabled:!1,type:"temporal",streams:[],validation:j(),setEnabled:b=>a(a=>({joinStore:{...a.joinStore,enabled:b}})),setType:b=>a(a=>({joinStore:{...a.joinStore,type:b}})),setStreams:b=>a(a=>({joinStore:{...a.joinStore,streams:b.map(a=>({topicName:a.topicName,streamId:a.streamId,joinKey:a.joinKey,joinTimeWindowValue:a.joinTimeWindowValue,joinTimeWindowUnit:a.joinTimeWindowUnit,orientation:a.orientation})),validation:k()}})),getIsJoinDirty:()=>{let{streams:a}=b().joinStore;return a.length>0},resetJoinStore:()=>a(a=>({joinStore:{...a.joinStore,...q}})),markAsValid:()=>a(a=>({joinStore:{...a.joinStore,validation:k()}})),markAsInvalidated:b=>a(a=>({joinStore:{...a.joinStore,validation:l(b)}})),markAsNotConfigured:()=>a(a=>({joinStore:{...a.joinStore,validation:j()}})),resetValidation:()=>a(a=>({joinStore:{...a.joinStore,validation:j()}}))}}))(a,b,d),...((a,b)=>({coreStore:{...B,setPipelineId:b=>a(a=>({coreStore:{...a.coreStore,pipelineId:b}})),setPipelineName:b=>a(a=>({coreStore:{...a.coreStore,pipelineName:b}})),setOperationsSelected:b=>a(a=>({coreStore:{...a.coreStore,operationsSelected:b}})),setAnalyticsConsent:b=>a(a=>({coreStore:{...a.coreStore,analyticsConsent:b}})),setConsentAnswered:b=>a(a=>({coreStore:{...a.coreStore,consentAnswered:b}})),setOutboundEventPreview:b=>a(a=>({coreStore:{...a.coreStore,outboundEventPreview:b}})),markAsDirty:()=>{a(a=>({coreStore:{...a.coreStore,isDirty:!0}})),r.A.set("isDirty","true",{expires:1})},markAsClean:()=>{a(a=>({coreStore:{...a.coreStore,isDirty:!1}})),r.A.set("isDirty","false",{expires:1})},setApiConfig:b=>a(a=>({coreStore:{...a.coreStore,apiConfig:b}})),resetPipelineState:(c,d=!1)=>{let e=b().coreStore;d||e.isDirty&&c!==e.operationsSelected.operation?a(a=>({coreStore:{...a.coreStore,operationsSelected:{operation:c},outboundEventPreview:{events:[]},isDirty:!1}})):a(a=>({coreStore:{...a.coreStore,operationsSelected:{operation:c}}}))},setMode:b=>a(a=>({coreStore:{...a.coreStore,mode:b}})),setBaseConfig:b=>a(a=>({coreStore:{...a.coreStore,baseConfig:b}})),hydrateFromConfig:async c=>{a(a=>({coreStore:{...a.coreStore,pipelineId:c.pipeline_id,pipelineName:c.name,isDirty:!1}}));let d=b();await d.coreStore.hydrateSection("all",c)},resetToInitial:()=>{let{baseConfig:c}=b().coreStore;c&&a(a=>({coreStore:{...a.coreStore,pipelineId:c.pipeline_id,pipelineName:c.name,operationsSelected:{operation:""},outboundEventPreview:{events:[]},analyticsConsent:!1,consentAnswered:!1,isDirty:!1,apiConfig:{}}}))},discardChanges:()=>{let a=b(),{baseConfig:c}=a.coreStore;c&&a.coreStore.resetToInitial()},enterCreateMode:()=>{let c=b().coreStore.mode;a(a=>({coreStore:{...a.coreStore,...B,mode:"create",baseConfig:void 0,lastSavedConfig:void 0,saveHistory:[],analyticsConsent:a.coreStore.analyticsConsent,consentAnswered:a.coreStore.consentAnswered}})),s.dx.createEntered({fromMode:c,trigger:"enterCreateMode",resetState:!0})},enterEditMode:c=>{let d=A(c),e=b().coreStore.mode;a(a=>({coreStore:{...a.coreStore,mode:"edit",baseConfig:c,lastSavedConfig:c,saveHistory:[c],operationsSelected:{operation:d}}})),b().coreStore.hydrateFromConfig(c),s.dx.editEntered({fromMode:e,trigger:"enterEditMode",pipelineId:c.pipeline_id,pipelineName:c.name,operationType:d,hasBaseConfig:!0})},enterViewMode:async c=>{let d=A(c),e=b().coreStore.mode;a(a=>({coreStore:{...a.coreStore,mode:"view",baseConfig:c,lastSavedConfig:c,saveHistory:[c],operationsSelected:{operation:d}}}));let f=b();await f.coreStore.hydrateFromConfig(c),s.dx.viewEntered({fromMode:e,trigger:"enterViewMode",pipelineId:c.pipeline_id,pipelineName:c.name,hasBaseConfig:!0,isReadOnly:!0,operationType:d})},isDirtyComparedToBase:()=>{let{baseConfig:a,pipelineId:c,pipelineName:d}=b().coreStore;return!!a&&(c!==a.pipeline_id||d!==a.name)},setLastSavedConfig:b=>a(a=>({coreStore:{...a.coreStore,lastSavedConfig:b}})),addToSaveHistory:b=>a(a=>({coreStore:{...a.coreStore,saveHistory:[...a.coreStore.saveHistory,b],lastSavedConfig:b}})),getLastSavedConfig:()=>b().coreStore.lastSavedConfig,getSaveHistory:()=>b().coreStore.saveHistory,clearSaveHistory:()=>a(a=>({coreStore:{...a.coreStore,saveHistory:[],lastSavedConfig:void 0}})),discardToLastSaved:async()=>{let c=b(),{lastSavedConfig:d}=c.coreStore;if(d)try{await c.coreStore.hydrateFromConfig(d),a(a=>({coreStore:{...a.coreStore,isDirty:!1}}))}catch(a){throw console.error("Failed to discard to last saved config:",a),a}},hydrateSection:async(a,b)=>{try{switch(a){case"kafka":t(b);break;case"topics":case"deduplication":await w(b);break;case"join":z(b);break;case"clickhouse-connection":x(b);break;case"clickhouse-destination":await y(b);break;case"all":console.log("\uD83D\uDD04 Starting pipeline hydration..."),t(b),await w(b),x(b),await y(b),z(b),console.log("‚úÖ Pipeline hydration completed successfully");break;default:console.warn(`Unknown section for hydration: ${a}`)}}catch(b){if(console.error(`‚ùå Hydration failed for section '${a}':`,b),b instanceof Error&&b.message.includes("Kafka")){let{useStore:a}=await Promise.resolve().then(c.bind(c,64708)),b=a.getState();b.kafkaStore.markAsInvalidated("hydration-failed"),b.topicsStore.markAsInvalidated("hydration-failed")}throw b}},discardSection:async a=>{let c=b(),{lastSavedConfig:d}=c.coreStore;if(d)try{await c.coreStore.hydrateSection(a,d)}catch(b){throw console.error(`Failed to discard section '${a}':`,b),b}else console.warn("No lastSavedConfig available for section discard")},discardSections:a=>{let c=b(),{lastSavedConfig:d}=c.coreStore;d?a.forEach(a=>{c.coreStore.hydrateSection(a,d)}):console.warn("No lastSavedConfig available for sections discard")}}}))(a,b,d),resetAllPipelineState:(c,d=!1)=>{let e=b(),f=e.coreStore,g=(a=>{switch(a){case"joining":case"deduplication_joining":return 2;default:return 1}})(c);d||f.isDirty&&c!==f.operationsSelected.operation?(console.log("\uD83E\uDDF9 Complete state reset for new pipeline creation"),e.kafkaStore.resetKafkaStore(),e.topicsStore.resetTopicsStore(),e.deduplicationStore.resetDeduplicationStore(),e.joinStore.resetJoinStore(),e.clickhouseConnectionStore.resetClickhouseStore(),e.clickhouseDestinationStore.resetDestinationStore(),e.stepsStore.resetStepsStore(),e.coreStore.enterCreateMode(),e.coreStore.setOperationsSelected({operation:c}),a(a=>({topicsStore:{...a.topicsStore,topicCount:g}}))):(console.log("\uD83D\uDD04 Partial state reset - operation change only"),a(a=>({coreStore:{...a.coreStore,operationsSelected:{operation:c}},topicsStore:{...a.topicsStore,topicCount:g}})))},resetForNewPipeline:a=>{console.log("\uD83C\uDD95 Resetting state for new pipeline creation");let c=b();c.resetAllPipelineState(a,!0),r.A.remove("isDirty"),c.coreStore.clearSaveHistory()},resetFormValidationStates:()=>{console.log("\uD83D\uDD04 Resetting form validation states");let a=b();a.kafkaStore.resetValidation(),a.topicsStore.resetValidation(),a.deduplicationStore.resetValidation(),a.joinStore.resetValidation(),a.clickhouseConnectionStore.resetValidation(),a.clickhouseDestinationStore.resetValidation()},clearAllUserData:()=>{console.log("\uD83D\uDCA3 Nuclear reset - clearing ALL user data");let a=b();a.kafkaStore.resetKafkaStore(),a.topicsStore.resetTopicsStore(),a.deduplicationStore.resetDeduplicationStore(),a.joinStore.resetJoinStore(),a.clickhouseConnectionStore.resetClickhouseStore(),a.clickhouseDestinationStore.resetDestinationStore(),a.stepsStore.resetStepsStore(),a.coreStore.enterCreateMode(),r.A.remove("isDirty"),a.coreStore.clearSaveHistory()}}),{name:"app-clickhouse-pivot-store",enabled:!1}));(0,d.v)()((0,e.lt)(a=>({...C.getState(),...i})));let D=C},66740:(a,b,c)=>{"use strict";c.d(b,{e9:()=>d}),process.env.NEXT_PUBLIC_CLICKHOUSE_HOST,process.env.NEXT_PUBLIC_CLICKHOUSE_HTTP_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_NATIVE_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,process.env.NEXT_PUBLIC_CLICKHOUSE_HOST,process.env.NEXT_PUBLIC_CLICKHOUSE_HTTP_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_NATIVE_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,process.env.NEXT_PUBLIC_CLICKHOUSE_HOST,process.env.NEXT_PUBLIC_CLICKHOUSE_HTTP_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_NATIVE_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,process.env.NEXT_PUBLIC_CLICKHOUSE_HOST,process.env.NEXT_PUBLIC_CLICKHOUSE_HTTP_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_NATIVE_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,process.env.NEXT_PUBLIC_CLICKHOUSE_HOST,process.env.NEXT_PUBLIC_CLICKHOUSE_HTTP_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_NATIVE_PORT,process.env.NEXT_PUBLIC_CLICKHOUSE_USERNAME,process.env.NEXT_PUBLIC_CLICKHOUSE_PASSWORD,c(84621);let d=a=>{let b,c="true"===process.env.NEXT_PUBLIC_IN_DOCKER,d="true"===process.env.NEXT_PUBLIC_USE_MOCK_API;if(d)if(0)b=`/ui-api/mock/${a}`;else{let c=process.env.PORT||"3000";b=`http://localhost:${c}/ui-api/mock/${a}`}else b=`${c?"http://ui:8080":"http://localhost:3000"}/ui-api/${a}`;return b}},82823:(a,b,c)=>{"use strict";c.d(b,{HealthCheckProvider:()=>i});var d=c(48477),e=c(48296),f=c(26403);function g({showHealthCheck:a,onTestConnection:b,isConnected:c,isLoading:e}){return a?(0,d.jsxs)("div",{className:"flex flex-col items-center gap-8 w-full max-w-[488px] border border-[var(--border)] rounded-xl px-6 py-3 bg-[var(--color-background-neutral-faded)] shadow-lg animate-fadeIn z-50",children:[(0,d.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,d.jsx)("h2",{className:"title-2 flex items-center",children:(0,d.jsx)("span",{className:"text-normal-accent",children:"Troubleshoot Back-End Connection"})})}),(0,d.jsxs)("p",{className:"w-full text-left font-regular font-weight-[400] font-size-[16px] font-color-[var(--color-foreground-neutral-faded)]",children:[(0,d.jsx)("span",{className:"text-normal-accent",children:"The GlassFlow UI is unable to connect to the back-end API. Please test the connection by clicking the button below to ensure the back-end service is running and accessible."}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("span",{className:"text-normal-accent",children:["If the problem persists, please check our"," ",(0,d.jsx)("a",{href:"https://docs.glassflow.dev/getting-started/troubleshooting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"troubleshooting guide"})," ","or contact support for assistance."]})]}),(0,d.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-[var(--color-foreground-neutral-faded)]",children:"Back-End Status"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:`w-3 h-3 rounded-full ${e?"bg-yellow-500 animate-pulse":c?"bg-green-500":"bg-red-500"}`}),(0,d.jsx)("span",{className:"text-sm font-medium",children:e?"Testing...":c?"Active":"Not Responding"})]})]}),(0,d.jsx)(f.$,{className:"btn-primary",type:"button",variant:"gradient",size:"custom",onClick:b,disabled:e,children:e?"Testing...":"Test Connection"})]})]}):null}var h=c(56834);function i({children:a}){let[b,c]=(0,e.useState)(!1),[f,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),l=async()=>{k(!0);try{let a=await (0,h.$)();i(a.success),c(!a.success)}catch(a){i(!1),c(!0)}finally{k(!1)}};return(0,d.jsxs)(d.Fragment,{children:[a,b&&(0,d.jsxs)("div",{className:"fixed top-8 right-8 z-50 max-w-[488px] animate-slideDownFade",children:[(0,d.jsx)(g,{showHealthCheck:b,onTestConnection:l,isConnected:f,isLoading:j}),(0,d.jsx)("button",{onClick:()=>{c(!1)},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close health check dialog",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}},84072:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,86429,23)),Promise.resolve().then(c.bind(c,14870)),Promise.resolve().then(c.bind(c,82823)),Promise.resolve().then(c.bind(c,44041)),Promise.resolve().then(c.bind(c,51978)),Promise.resolve().then(c.bind(c,89422)),Promise.resolve().then(c.bind(c,54137))},84621:(a,b,c)=>{"use strict";c.d(b,{$C:()=>g,$c:()=>m,B$:()=>j,E7:()=>i,EP:()=>k,ZV:()=>n,bB:()=>l,cn:()=>f,fw:()=>p,y:()=>h,z3:()=>o,zO:()=>q});var d=c(31774),e=c(82906);function f(...a){return(0,e.QP)((0,d.$)(a))}let g=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),h=()=>({}),i=()=>"true"===process.env.NEXT_PUBLIC_ANALYTICS_ENABLED,j=(a,b="")=>{if(!a||"object"!=typeof a)return[];let c=[];return Object.keys(a).forEach(d=>{if(d.startsWith("_metadata"))return;let e=b?`${b}.${d}`:d,f=a[d];if(f&&"object"==typeof f&&!Array.isArray(f)){let a=j(f,e);c=[...c,...a]}else Array.isArray(f),c.push(e)}),c},k=(a,b)=>{if(!a&&!b)return!0;if(!a||!b)return!1;try{let c={...a},d={...b};delete c?._metadata,delete d?._metadata;let e=j(c).sort(),f=j(d).sort();if(e.length!==f.length)return console.log("[Schema Comparison] Field count differs:",{old:e.length,new:f.length}),!1;for(let a=0;a<e.length;a++)if(e[a]!==f[a])return console.log("[Schema Comparison] Field path differs:",{old:e[a],new:f[a]}),!1;return console.log("[Schema Comparison] Schemas match! Field count:",e.length),!0}catch(a){return console.error("[Schema Comparison] Error comparing schemas:",a),!1}},l=(a,b=[])=>{let c=a.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");if(!b.includes(c))return c;let d=RegExp(`^${c}(-\\d+)?$`),e=Math.max(0,...b.filter(a=>d.test(a)).map(a=>{let b=a.match(/-(\d+)$/);return b?parseInt(b[1]):0}));return`${c}-${e+1}`};function m(a){if(!a)return"";try{if("string"==typeof a){let b=JSON.parse(a);return b&&"object"==typeof b&&b._metadata&&delete b._metadata,JSON.stringify(b,null,2)}let b={...a};return b&&b._metadata&&delete b._metadata,JSON.stringify(b,null,2)}catch(b){return console.error("Error parsing data for code editor:",b),"string"==typeof a?a:String(a)}}let n=a=>a>=1e12?`${(a/1e12).toFixed(1)}T`:a>=1e9?`${(a/1e9).toFixed(1)}B`:a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString(),o=a=>a>=1e12?`${(a/1e12).toFixed(1)}TB`:a>=1e9?`${(a/1e9).toFixed(1)}GB`:a>=1e6?`${(a/1e6).toFixed(1)}MB`:a>=1e3?`${(a/1e3).toFixed(1)}KB`:`${a}B`,p=(a,b)=>{if(!a||""===a||"0"===a)return"-";let c=b||new Date,d=new Date(a);if(isNaN(d.getTime())||2e3>d.getFullYear())return"-";let e=c.getTime()-d.getTime();if(e<0)return"-";let f=Math.floor(e/1e3),g=Math.floor(f/60);if(f<5)return"Just now";if(f<60)return`${f} sec. ago`;if(g<60)return`${g} min. ago`;let h=Math.floor(g/60);if(h<24)return`${h} hour${h>1?"s":""} ago`;let i=Math.floor(h/24);return i>365?"Over a year ago":`${i} day${i>1?"s":""} ago`},q=a=>{if(!a||""===a||"0"===a)return"-";let b=new Date,c=new Date(a);if(isNaN(c.getTime())||2e3>c.getFullYear())return"-";let d=b.getTime()-c.getTime();if(d<0)return"-";let e=Math.floor(d/1e3),f=Math.floor(e/60);if(e<5)return"Just now";if(e<60)return`${e} sec. ago`;if(f<60)return`${f} min. ago`;let g=a=>a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(b.getDate()===c.getDate()&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear())return`Today, ${g(c)}`;let h=new Date(b);if(h.setDate(h.getDate()-1),h.getDate()===c.getDate()&&h.getMonth()===c.getMonth()&&h.getFullYear()===c.getFullYear())return`Yesterday, ${g(c)}`;let i=c.toLocaleString("en-US",{month:"short"}),j=c.getDate(),k=c.getFullYear(),l=b.getFullYear(),m=g(c);return k!==l?`${i} ${j}, ${k}, ${m}`:`${i} ${j}, ${m}`}},86130:(a,b,c)=>{"use strict";c.d(b,{z:()=>d});let d={Consent_Given:{name:"Consent Given",key:"Consent_Given"},Consent_NotGiven:{name:"Consent Not Given",key:"Consent_NotGiven"},Feedback_Submitted:{name:"Feedback Submitted",key:"Feedback_Submitted"},P0_Homepage:{name:"P0 Homepage",key:"P0_Homepage"},P1_SetupKafkaConnection:{name:"P1 Setup Kafka Connection",key:"P1_SetupKafkaConnection"},P2_SelectTopic:{name:"P2 Select Topic",key:"P2_SelectTopic"},P2_SelectLeftTopic:{name:"P2 Select Left Topic",key:"P2_SelectLeftTopic"},P2_1_SelectRightTopic:{name:"P2.1 Select Right Topic",key:"P2_1_SelectRightTopic"},P3_DeduplicationKey:{name:"P3 Deduplication Key",key:"P3_DeduplicationKey"},P3_JoinKey:{name:"P3 Join Key",key:"P3_JoinKey"},P3_TopicDeduplication:{name:"P3 Topic Deduplication",key:"P3_TopicDeduplication"},P4_SetupClickhouseConnection:{name:"P4 Setup Clickhouse Connection",key:"P4_SetupClickhouseConnection"},P5_SelectDestination:{name:"P5 Select Destination",key:"P5_SelectDestination"},P6_Pipelines:{name:"P6 Pipelines",key:"P6_Pipelines"},Deduplication_Clicked:{name:"Deduplication Clicked",key:"Deduplication_Clicked"},Join_Clicked:{name:"Join Clicked",key:"Join_Clicked"},DedupAndJoin_Clicked:{name:"Dedup And Join Clicked",key:"DedupAndJoin_Clicked"},IngestOnly_Clicked:{name:"Ingest Only Clicked",key:"IngestOnly_Clicked"},KafkaConnection_Started:{name:"Kafka Connection Started",key:"KafkaConnection_Started"},KafkaConnection_Failed:{name:"Kafka Connection Failed",key:"KafkaConnection_Failed"},KafkaConnection_Success:{name:"Kafka Connection Success",key:"KafkaConnection_Success"},TopicSelected:{name:"Topic Selected",key:"TopicSelected"},TopicSelected_EventReceived:{name:"Topic Selected Event Received",key:"TopicSelected_EventReceived"},TopicSelected_NoEvent:{name:"Topic Selected No Event",key:"TopicSelected_NoEvent"},TopicSelected_EventError:{name:"Topic Selected Event Error",key:"TopicSelected_EventError"},DedupKeySelected:{name:"Dedup Key Selected",key:"DedupKeySelected"},LeftJoinKeySelected:{name:"Left Join Key Selected",key:"LeftJoinKeySelected"},RightJoinKeySelected:{name:"Right Join Key Selected",key:"RightJoinKeySelected"},JoinConfiguration_Started:{name:"Join Configuration Started",key:"JoinConfiguration_Started"},JoinConfiguration_FieldChanged:{name:"Join Configuration Field Changed",key:"JoinConfiguration_FieldChanged"},JoinConfiguration_StreamConfigured:{name:"Join Configuration Stream Configured",key:"JoinConfiguration_StreamConfigured"},JoinConfiguration_Completed:{name:"Join Configuration Completed",key:"JoinConfiguration_Completed"},JoinConfiguration_ValidationFailed:{name:"Join Configuration Validation Failed",key:"JoinConfiguration_ValidationFailed"},ClickhouseConnection_Started:{name:"Clickhouse Connection Started",key:"ClickhouseConnection_Started"},ClickhouseConnection_Failed:{name:"Clickhouse Connection Failed",key:"ClickhouseConnection_Failed"},ClickhouseConnection_Success:{name:"Clickhouse Connection Success",key:"ClickhouseConnection_Success"},Destination_DatabaseSelected:{name:"Destination Database Selected",key:"Destination_DatabaseSelected"},Destination_TableSelected:{name:"Destination Table Selected",key:"Destination_TableSelected"},Destination_ColumnsShowed:{name:"Destination Columns Showed",key:"Destination_ColumnsShowed"},Destination_ColumnsSelected:{name:"Destination Columns Selected",key:"Destination_ColumnsSelected"},Destination_DatabaseFetched:{name:"Destination Database Fetched",key:"Destination_DatabaseFetched"},Destination_TableFetched:{name:"Destination Table Fetched",key:"Destination_TableFetched"},Destination_MappingCompleted:{name:"Destination Mapping Completed",key:"Destination_MappingCompleted"},Destination_DatabaseFetchedError:{name:"Destination Database Fetched Error",key:"Destination_DatabaseFetchedError"},Destination_TableFetchedError:{name:"Destination Table Fetched Error",key:"Destination_TableFetchedError"},Deploy_Clicked:{name:"Deploy Clicked",key:"Deploy_Clicked"},Deploy_Failed:{name:"Deploy Failed",key:"Deploy_Failed"},Deploy_Success:{name:"Deploy Success",key:"Deploy_Success"},PipelinePause_Clicked:{name:"Pipeline Pause Clicked",key:"PipelinePause_Clicked"},PipelinePause_Failed:{name:"Pipeline Pause Failed",key:"PipelinePause_Failed"},PipelinePause_Success:{name:"Pipeline Pause Success",key:"PipelinePause_Success"},PipelineResume_Clicked:{name:"Pipeline Resume Clicked",key:"PipelineResume_Clicked"},PipelineResume_Failed:{name:"Pipeline Resume Failed",key:"PipelineResume_Failed"},PipelineResume_Success:{name:"Pipeline Resume Success",key:"PipelineResume_Success"},PipelineRename_Clicked:{name:"Pipeline Rename Clicked",key:"PipelineRename_Clicked"},PipelineRename_Failed:{name:"Pipeline Rename Failed",key:"PipelineRename_Failed"},PipelineRename_Success:{name:"Pipeline Rename Success",key:"PipelineRename_Success"},PipelineEdit_Clicked:{name:"Pipeline Edit Clicked",key:"PipelineEdit_Clicked"},PipelineEdit_Failed:{name:"Pipeline Edit Failed",key:"PipelineEdit_Failed"},PipelineEdit_Success:{name:"Pipeline Edit Success",key:"PipelineEdit_Success"},PipelineDelete_Clicked:{name:"Pipeline Delete Clicked",key:"PipelineDelete_Clicked"},PipelineDelete_Failed:{name:"Pipeline Delete Failed",key:"PipelineDelete_Failed"},PipelineDelete_Success:{name:"Pipeline Delete Success",key:"PipelineDelete_Success"},PipelineModify_Clicked:{name:"Pipeline Modify Clicked",key:"PipelineModify_Clicked"},PipelineModify_Failed:{name:"Pipeline Modify Failed",key:"PipelineModify_Failed"},PipelineModify_Success:{name:"Pipeline Modify Success",key:"PipelineModify_Success"},Pipeline_ExistingPipeline:{name:"Pipeline Existing Pipeline",key:"Pipeline_ExistingPipeline"},Pipeline_ExistingSamePipeline:{name:"Pipeline Existing Same Pipeline",key:"Pipeline_ExistingSamePipeline"},Mode_CreateEntered:{name:"Create Mode Entered",key:"Mode_CreateEntered"},Mode_EditEntered:{name:"Edit Mode Entered",key:"Mode_EditEntered"},Mode_ViewEntered:{name:"View Mode Entered",key:"Mode_ViewEntered"}}},87420:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,52285,23)),Promise.resolve().then(c.t.bind(c,39140,23)),Promise.resolve().then(c.t.bind(c,65866,23)),Promise.resolve().then(c.t.bind(c,30861,23)),Promise.resolve().then(c.t.bind(c,4505,23)),Promise.resolve().then(c.t.bind(c,24737,23)),Promise.resolve().then(c.t.bind(c,22233,23)),Promise.resolve().then(c.t.bind(c,36587,23)),Promise.resolve().then(c.bind(c,90329))},87437:(a,b,c)=>{"use strict";c.d(b,{R:()=>g,W:()=>h});var d=c(48477),e=c(5375),f=c(26403);let g={CANCEL:"CANCEL",YES:"YES",NO:"NO"};function h({visible:a,title:b,description:c,okButtonText:h,cancelButtonText:i,onComplete:j,pendingOperation:k,criticalOperation:l}){return(0,d.jsxs)(e.lG,{open:a,onOpenChange:a=>{a||j(g.NO,k||"")},children:[(0,d.jsx)(e.LC,{className:"!fixed !inset-0","aria-hidden":"true",style:{backgroundColor:"rgba(17, 25, 40, 0.25)",backdropFilter:"blur(4px) saturate(30%)",WebkitBackdropFilter:"blur(4px) saturate(30%)",border:"1px solid rgba(255, 255, 255, 0.125)"}}),(0,d.jsxs)(e.Cf,{className:"sm:max-w-[500px] info-modal-container px-9 py-6 shadow-lg bg-[var(--color-background-elevation-raised-faded-2)] border border-[var(--color-border-neutral)] rounded-md",children:[(0,d.jsxs)(e.c7,{children:[(0,d.jsx)(e.L3,{className:"modal-title flex items-center gap-2 mb-8",children:b}),(0,d.jsx)(e.rr,{className:"modal-description gap-2",children:c})]}),(0,d.jsxs)(e.Es,{className:"mt-6",children:[(0,d.jsx)(f.$,{variant:"outline",className:"btn-tertiary",onClick:()=>{j(g.NO,k||"")},children:i}),(0,d.jsx)(f.$,{className:l?"btn-critical":"btn-primary",onClick:()=>{j(g.YES,k||"")},children:h})]})]})]})}},89422:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(48477),e=c(97345);function f({children:a}){return(0,d.jsx)(e.N,{attribute:"data-theme",defaultTheme:"dark",enableSystem:!1,disableTransitionOnChange:!0,suppressHydrationWarning:!0,children:a})}},90480:(a,b,c)=>{"use strict";c.d(b,{AnalyticsProvider:()=>d});let d=(0,c(13383).registerClientReference)(function(){throw Error("Attempted to call AnalyticsProvider() from the server but AnalyticsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nnaumov/Apps/clickhouse-etl/ui/src/components/providers/AnalyticsProvider.tsx","AnalyticsProvider")},95369:()=>{}};