{
  "version": "2.0.0",
  "pipeline_id": "traces-pipeline",
  "name": "Traces Pipeline",
  "source": {
    "type": "kafka",
    "provider": "custom",
    "connection_params": {
      "brokers": [
        "kafka.kafka.svc.cluster.local:9092"
      ],
      "protocol": "PLAINTEXT",
      "mechanism": "NO_AUTH"
    },
    "topics": [
      {
        "consumer_group_initial_offset": "latest",
        "name": "otel-traces",
        "id": "otel-traces",
        "replicas": 1,
        "deduplication": {
          "enabled": true,
          "id_field": "TraceId",
          "id_field_type": "string",
          "time_window": "10m"
        }
      }
    ]
  },
  "sink": {
    "type": "clickhouse",
    "host": "hyperdx-hdx-oss-v2-clickhouse.hyperdx.svc.cluster.local",
    "port": "9000",
    "http_port": "8123",
    "database": "default",
    "username": "otel",
    "password": "cGFzc3dvcmQ=",
    "secure": false,
    "max_batch_size": 1000,
    "max_delay_time": "30s",
    "table": "otel_traces",
    "skip_certificate_verification": false
  },
  "schema": {
    "fields": [
      {
        "source_id": "otel-traces",
        "name": "Timestamp",
        "type": "string",
        "column_name": "Timestamp",
        "column_type": "DateTime64"
      },
      {
        "source_id": "otel-traces",
        "name": "TraceId",
        "type": "string",
        "column_name": "TraceId",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "SpanId",
        "type": "string",
        "column_name": "SpanId",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "ParentSpanId",
        "type": "string",
        "column_name": "ParentSpanId",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "TraceState",
        "type": "string",
        "column_name": "TraceState",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "SpanName",
        "type": "string",
        "column_name": "SpanName",
        "column_type": "LowCardinality(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "SpanKind",
        "type": "string",
        "column_name": "SpanKind",
        "column_type": "LowCardinality(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "ServiceName",
        "type": "string",
        "column_name": "ServiceName",
        "column_type": "LowCardinality(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "ResourceAttributes",
        "type": "map",
        "column_name": "ResourceAttributes",
        "column_type": "Map(LowCardinality(String), String)"
      },
      {
        "source_id": "otel-traces",
        "name": "ScopeName",
        "type": "string",
        "column_name": "ScopeName",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "ScopeVersion",
        "type": "string",
        "column_name": "ScopeVersion",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "SpanAttributes",
        "type": "map",
        "column_name": "SpanAttributes",
        "column_type": "Map(LowCardinality(String), String)"
      },
      {
        "source_id": "otel-traces",
        "name": "Duration",
        "type": "uint64",
        "column_name": "Duration",
        "column_type": "UInt64"
      },
      {
        "source_id": "otel-traces",
        "name": "StatusCode",
        "type": "string",
        "column_name": "StatusCode",
        "column_type": "LowCardinality(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "StatusMessage",
        "type": "string",
        "column_name": "StatusMessage",
        "column_type": "String"
      },
      {
        "source_id": "otel-traces",
        "name": "Events.Timestamp",
        "type": "array",
        "column_name": "Events.Timestamp",
        "column_type": "Array(DateTime64)"
      },
      {
        "source_id": "otel-traces",
        "name": "Events.Name",
        "type": "array",
        "column_name": "Events.Name",
        "column_type": "Array(LowCardinality(String))"
      },
      {
        "source_id": "otel-traces",
        "name": "Events.Attributes",
        "type": "array",
        "column_name": "Events.Attributes",
        "column_type": "Array(Map(LowCardinality(String), String))"
      },
      {
        "source_id": "otel-traces",
        "name": "Links.TraceId",
        "type": "array",
        "column_name": "Links.TraceId",
        "column_type": "Array(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "Links.SpanId",
        "type": "array",
        "column_name": "Links.SpanId",
        "column_type": "Array(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "Links.TraceState",
        "type": "array",
        "column_name": "Links.TraceState",
        "column_type": "Array(String)"
      },
      {
        "source_id": "otel-traces",
        "name": "Links.Attributes",
        "type": "array",
        "column_name": "Links.Attributes",
        "column_type": "Array(Map(LowCardinality(String), String))"
      }
    ]
  }
}